{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/src/admin/announcements/EditAcm.js\";\nimport React from 'react';\nimport { getSingleAnnouncement, putEditAnnouncement } from '../../controllers/announcementController';\nimport Mde from '../editor/Mde';\nimport Tags from '../components/Tags';\nimport { isAuthenticated } from '../../controllers/userController';\nimport Notify from '../components/Notify'; // import ReactMarkdown from 'react-markdown';\n\nclass EditAcm extends React.Component {\n  constructor() {\n    super();\n\n    this.handlePostAcm = () => {\n      let id = this.state.id;\n      let token = isAuthenticated().token;\n      let editor = document.querySelector(\"textarea.mde-text \");\n      let body = \"\";\n\n      if (editor) {\n        body = editor.value;\n        let title = this.state.title;\n        let isImportant = document.getElementById(\"is-important\").checked; // tags\n\n        let tagsname = document.getElementById(\"tagsname\").value;\n        let tagsnameArray = tagsname.split(\" \");\n        tagsnameArray = tagsnameArray.filter(t => t !== \"\");\n\n        if (title) {\n          if (body === \"\") {\n            body = undefined;\n          }\n\n          putEditAnnouncement({\n            title,\n            body,\n            isImportant,\n            tagsnameArray,\n            id\n          }, token).then(res => {\n            console.log(res);\n            this.setState({\n              message: res.message\n            });\n          });\n        }\n      } else {\n        alert(\"Please turn to write mode\");\n      }\n    };\n\n    this.closeTag = text => {\n      let tagsname = document.getElementById(\"tagsname\");\n      let tagsnameArray = tagsname.value.split(\" \").filter(t => t !== text);\n      tagsname.value = tagsnameArray.join(\" \");\n      this.setState({\n        tagDom: tagsname.value\n      });\n    };\n\n    this.handleChangeTag = e => {\n      if (e.keyCode === 32) {\n        let tagsname = document.getElementById(\"tagsname\");\n        let tagreplace = document.getElementById(\"tageditor-replacing-tagnames--input\");\n        tagsname.value = tagsname.value + e.target.value;\n        this.setState({\n          tagDom: tagsname.value\n        });\n        tagreplace.value = \"\";\n      }\n    };\n\n    this.handleChangeValue = text => {\n      this.setState({\n        title: text\n      });\n    };\n\n    this.clearMess = () => {\n      this.setState({\n        message: \"\"\n      });\n    };\n\n    this.state = {\n      acm: {},\n      title: \"\",\n      body: \"\",\n      id: \"\",\n      isImportant: false,\n      tagDom: \"\",\n      message: \"\"\n    };\n  }\n\n  componentDidMount() {\n    // fetching data\n    getSingleAnnouncement(this.props.match.params.acmId, isAuthenticated().user._id).then(res => {\n      if (!res.message) {\n        let tg = \"\";\n        res.tags.map(t => tg += t.name + \" \");\n        this.setState({\n          acm: res,\n          title: res.title,\n          body: res.body,\n          id: res._id,\n          isImportant: res.isImportant,\n          tagDom: tg\n        });\n        document.getElementById(\"tagsname\").value = this.state.tagDom;\n\n        if (res.isImportant) {\n          document.getElementById(\"is-important\").checked = true;\n        }\n      } else {\n        this.props.history.push(\"/404\");\n      }\n    }); // \n\n    let editor = document.querySelector(\"textarea.mde-text \");\n    editor.setAttribute(\"id\", \"announ-content\");\n    editor.setAttribute(\"name\", \"announ-content\");\n    document.querySelector(\"#tageditor-replacing-tagnames--input\").addEventListener(\"keyup\", this.handleChangeTag, false);\n  }\n\n  componentDidUpdate() {\n    let tagsIncludedSize = document.querySelector(\".tags-included\").offsetWidth;\n    document.querySelector(\"#tageditor-replacing-tagnames--input\").style.paddingLeft = tagsIncludedSize + 10 + \"px\";\n  }\n\n  componentWillUnmount() {\n    document.querySelector(\"#tageditor-replacing-tagnames--input\").removeEventListener(\"keyup\", this.handleChangeTag, false);\n  }\n\n  render() {\n    const _this$state = this.state,\n          tagDom = _this$state.tagDom,\n          message = _this$state.message,\n          title = _this$state.title,\n          body = _this$state.body;\n    console.log(tagDom);\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      id: \"mainbar\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Notify, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), message !== \"\" && React.createElement(Notify, {\n      class: \"on\",\n      text: message,\n      clearMess: this.clearMess,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"announ-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bg-white bar-sm bs-md p16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"post-title ps-relative mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      className: \"s-label mb4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Title\", React.createElement(\"p\", {\n      className: \"s-desscription mt4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"A programming language or whatever \"))), React.createElement(\"div\", {\n      className: \"ps-relative mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"title\",\n      name: \"title\",\n      type: \"text\",\n      className: \"s-input w-100\",\n      value: title,\n      onChange: e => this.handleChangeValue(e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"post-editor mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ps-relative\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"announ-content\",\n      className: \"s-label mb16 d-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Body\", React.createElement(\"p\", {\n      className: \"s-desscription mt4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Announcement body (all of the information about the announcement)\")), React.createElement(\"pre\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, body), React.createElement(Mde, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"d-flex align-items-center pb12 fc-light fs-caption mt16 mb24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mr16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"``` \", React.createElement(\"code\", {\n      className: \"ba bc-black-9 px4 py2 bar-sm bg-black-050 fc-black-800 ff-mono\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"code\"), \" ```\"), React.createElement(\"div\", {\n      className: \"mr16 fw-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"**bold**\"), React.createElement(\"div\", {\n      className: \"mr16 fs-italic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"*italic*\"), React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \">quote\")), React.createElement(\"div\", {\n      className: \"ps-relative pt24\",\n      id: \"tag-editor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"tagsname\",\n      className: \"s-label mb16 d-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Tags\", React.createElement(\"p\", {\n      className: \"s-desscription mt4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Add tags to describe what your announcement is about\")), React.createElement(\"div\", {\n      className: \"ps-relative mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"tagsname\",\n      name: \"tagsname\",\n      type: \"text\",\n      className: \"s-input w-100 d-none\",\n      placeholder: \"e.g. (javascript xml react)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"tags-editor ps-relative\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"tags-included ps-absolute\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, tagDom.split(\" \").map((tag, index) => {\n      return tag !== \"\" && React.createElement(Tags, {\n        key: index,\n        id: \"data-\" + tag,\n        closeTag: () => this.closeTag(tag),\n        name: tag,\n        close: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      });\n    })), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"s-input w-100\",\n      placeholder: \"e.g. (javascript xml react)\",\n      id: \"tageditor-replacing-tagnames--input\",\n      onChange: e => this.handleChangeTag(e.target.value, e.keyCode),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"post-title ps-relative mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"is-important\",\n      className: \"s-label mb4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Is important\", React.createElement(\"p\", {\n      className: \"s-desscription mt4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Is this announcement important? Check it\"))), React.createElement(\"div\", {\n      className: \"ps-relative mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"is-important\",\n      name: \"is-important\",\n      type: \"checkbox\",\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"s-btn s-btn__outline s-btn__primary mt24\",\n      onClick: this.handlePostAcm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Save this\")))), React.createElement(\"div\", {\n      className: \"clear-fix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default EditAcm;","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/src/admin/announcements/EditAcm.js"],"names":["React","getSingleAnnouncement","putEditAnnouncement","Mde","Tags","isAuthenticated","Notify","EditAcm","Component","constructor","handlePostAcm","id","state","token","editor","document","querySelector","body","value","title","isImportant","getElementById","checked","tagsname","tagsnameArray","split","filter","t","undefined","then","res","console","log","setState","message","alert","closeTag","text","join","tagDom","handleChangeTag","e","keyCode","tagreplace","target","handleChangeValue","clearMess","acm","componentDidMount","props","match","params","acmId","user","_id","tg","tags","map","name","history","push","setAttribute","addEventListener","componentDidUpdate","tagsIncludedSize","offsetWidth","style","paddingLeft","componentWillUnmount","removeEventListener","render","width","tag","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getSingleAnnouncement, putEditAnnouncement } from '../../controllers/announcementController';\nimport Mde from '../editor/Mde';\nimport Tags from '../components/Tags';\nimport { isAuthenticated } from '../../controllers/userController';\nimport Notify from '../components/Notify';\n// import ReactMarkdown from 'react-markdown';\n\nclass EditAcm extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            acm: {},\n            title: \"\",\n            body: \"\",\n            id: \"\",\n            isImportant: false,\n            tagDom: \"\",\n            message: \"\",\n        }\n    }\n\n    handlePostAcm = () => {\n        let id = this.state.id;\n        let token = isAuthenticated().token;\n        let editor = document.querySelector(\"textarea.mde-text \");\n        let body = \"\";\n        if(editor) {\n            body = editor.value;\n            let title = this.state.title;\n            let isImportant = document.getElementById(\"is-important\").checked;\n            // tags\n            let tagsname = document.getElementById(\"tagsname\").value;\n            let tagsnameArray = tagsname.split(\" \")\n            tagsnameArray = tagsnameArray.filter( t => t !== \"\");\n\n            if(title) {\n                if(body === \"\") {\n                    body = undefined;\n                }\n                putEditAnnouncement({title, body, isImportant, tagsnameArray, id}, token)\n                .then( res => {\n                    console.log(res);\n                    this.setState( {message: res.message} );\n                })\n            }\n        } else {\n            alert(\"Please turn to write mode\")\n        }\n    }\n\n    closeTag = (text) => {\n        let tagsname = document.getElementById(\"tagsname\");\n        let tagsnameArray = tagsname.value.split(\" \").filter( t => t !== text);\n        tagsname.value = tagsnameArray.join(\" \");\n        this.setState( {tagDom: tagsname.value} );\n    }\n\n    handleChangeTag = (e) => {\n        if(e.keyCode === 32) {\n            let tagsname = document.getElementById(\"tagsname\");\n            let tagreplace = document.getElementById(\"tageditor-replacing-tagnames--input\")\n            tagsname.value = tagsname.value + e.target.value;\n            this.setState( {tagDom: tagsname.value} );\n            tagreplace.value = \"\";\n        }\n    }\n\n    handleChangeValue = (text) => {\n        this.setState( {title: text} );\n    }\n\n    clearMess = () => {\n        this.setState( {message: \"\"} );\n    }\n\n    componentDidMount() {\n        // fetching data\n        getSingleAnnouncement(this.props.match.params.acmId, isAuthenticated().user._id)\n        .then( res => {\n            if(!res.message) {\n                let tg = \"\";\n                res.tags.map(t => tg += t.name + \" \");\n                this.setState( {acm: res, title: res.title, body: res.body, id: res._id, isImportant: res.isImportant, tagDom: tg} );\n                document.getElementById(\"tagsname\").value = this.state.tagDom;\n                if(res.isImportant) {\n                    document.getElementById(\"is-important\").checked = true;\n                }\n            } else {\n                this.props.history.push(\"/404\");\n            }\n        })\n        // \n        let editor = document.querySelector(\"textarea.mde-text \");\n        editor.setAttribute(\"id\", \"announ-content\")\n        editor.setAttribute(\"name\", \"announ-content\")\n\n        document.querySelector(\"#tageditor-replacing-tagnames--input\").addEventListener(\"keyup\", this.handleChangeTag, false);\n    }\n    componentDidUpdate() {\n        let tagsIncludedSize = document.querySelector(\".tags-included\").offsetWidth;\n        document.querySelector(\"#tageditor-replacing-tagnames--input\").style.paddingLeft = tagsIncludedSize + 10 + \"px\";\n    }\n    componentWillUnmount() {\n        document.querySelector(\"#tageditor-replacing-tagnames--input\").removeEventListener(\"keyup\", this.handleChangeTag, false);\n    }\n\n    render() {\n        const { tagDom, message, title, body } = this.state;\n        console.log(tagDom)\n        return (\n            <>\n                <div id=\"mainbar\" style={{width: \"100%\"}}>\n                    <Notify />  \n                    {message !== \"\" &&  <Notify class=\"on\" text={message} clearMess={this.clearMess} />}\n                    <div id=\"announ-form\">\n                        <div className=\"bg-white bar-sm bs-md p16\">\n                            <div className=\"post-title ps-relative mb16\">\n                                <label htmlFor=\"title\" className=\"s-label mb4\">\n                                    Title\n                                    <p className=\"s-desscription mt4\">A programming language or whatever </p>\n                                </label>\n                            </div>\n                            <div className=\"ps-relative mb16\">\n                                <input id=\"title\" name=\"title\" type=\"text\" className=\"s-input w-100\"\n                                    value={title}\n                                    onChange={ (e) => this.handleChangeValue(e.target.value) }\n                                />\n                            </div>\n                            \n                            <div className=\"post-editor mb16\">\n                                <div className=\"ps-relative\">\n                                    <label htmlFor=\"announ-content\" className=\"s-label mb16 d-block\">\n                                        Body\n                                        <p className=\"s-desscription mt4\">Announcement body (all of the information about the announcement)</p>\n                                    </label>\n                                    {/* <ReactMarkdown source={body}/> */}\n                                    <pre>{body}</pre>\n                                    <Mde />\n                                    {/* CAPTOPN */}\n                                    <div className=\"d-flex align-items-center pb12 fc-light fs-caption mt16 mb24\">\n                                        <div className=\"mr16\">\n                                            ``` <code className=\"ba bc-black-9 px4 py2 bar-sm bg-black-050 fc-black-800 ff-mono\">code</code> ```\n                                        </div>\n                                        <div className=\"mr16 fw-bold\">\n                                            **bold**\n                                        </div>\n                                        <div className=\"mr16 fs-italic\">\n                                            *italic*\n                                        </div>\n                                        <div className=\"\">\n                                            &gt;quote\n                                        </div>\n                                    </div>\n                                    {/* TAGS EDITOR */}\n                                    <div className=\"ps-relative pt24\" id=\"tag-editor\">\n                                        <label htmlFor=\"tagsname\" className=\"s-label mb16 d-block\">\n                                            Tags\n                                            <p className=\"s-desscription mt4\">Add tags to describe what your announcement is about</p>\n                                        </label>\n                                        <div className=\"ps-relative mb16\">\n                                            <input \n                                                id=\"tagsname\" name=\"tagsname\" type=\"text\" className=\"s-input w-100 d-none\" placeholder=\"e.g. (javascript xml react)\"    \n                                            />\n                                            <div className=\"tags-editor ps-relative\" >\n                                                <span className=\"tags-included ps-absolute\">\n                                                    \n                                                    {\n                                                        tagDom.split(\" \").map( (tag, index) => {\n                                                            return tag !== \"\" && <Tags key={index} id={\"data-\" + tag} closeTag={() => this.closeTag(tag)} name={tag} close={true}/>\n                                                        })\n                                                    }\n                                                </span>\n                                            <input\n                                                type=\"text\" className=\"s-input w-100\" placeholder=\"e.g. (javascript xml react)\"\n                                                id=\"tageditor-replacing-tagnames--input\"\n                                                onChange={(e) => this.handleChangeTag(e.target.value, e.keyCode)}\n                                            />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n    \n                            <div className=\"post-title ps-relative mb16\">\n                                <label htmlFor=\"is-important\" className=\"s-label mb4\">\n                                    Is important\n                                    <p className=\"s-desscription mt4\">Is this announcement important? Check it</p>\n                                </label>\n                            </div>\n                            <div className=\"ps-relative mb16\">\n                                <input id=\"is-important\" name=\"is-important\" type=\"checkbox\" className=\"\" />\n                            </div>\n    \n                            <button\n                                className=\"s-btn s-btn__outline s-btn__primary mt24\"\n                                onClick={this.handlePostAcm}\n                            >Save this</button>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"clear-fix\"></div>\n            </>\n        )\n    }\n}\n\nexport default EditAcm;"]},"metadata":{},"sourceType":"module"}