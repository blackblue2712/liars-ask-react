{"ast":null,"code":"import _slicedToArray from \"/opt/lampp/htdocs/Study_space/liars-ask-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/opt/lampp/htdocs/Study_space/liars-ask-react/src/client/images-gallery/ModalPopup.js\";\nimport React, { useEffect, useState } from 'react';\nimport icon from \"../../images/icon-photo.svg\";\nimport { isAuthenticated } from '../../controllers/userController';\nimport { postUploadImage } from '../../controllers/galleryController';\nimport Notify from '../components/Notify';\n\nconst ModalPopup = props => {\n  const formData = new FormData();\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        showNotify = _useState2[0],\n        setShowNotify = _useState2[1];\n\n  const closeDialog = () => {\n    document.querySelector(\".s-modal\").style.display = \"none\";\n  };\n\n  const previewPhoto = event => {\n    let reader = new FileReader();\n\n    reader.onload = function () {\n      let inputAvatar = document.getElementById('preview-img');\n      inputAvatar.src = reader.result;\n    };\n\n    reader.readAsDataURL(event.target.files[0]);\n    formData.append(\"photo\", event.target.files[0]);\n  };\n\n  const saveImg = () => {\n    let userId = isAuthenticated().user._id;\n\n    let token = isAuthenticated().token;\n    let btn = document.getElementById(\"wrap-btn-loading\");\n    btn.classList.add(\"btn-loading\");\n    postUploadImage(formData, userId, token).then(res => {\n      if (res.imageURL) {\n        closeDialog();\n        props.handleUploadedImage(res.imageURL);\n        setShowNotify(res.message);\n      }\n\n      btn.classList.remove(\"btn-loading\");\n    }).catch(err => {\n      setShowNotify(\"Error occur\");\n      btn.classList.remove(\"btn-loading\");\n    });\n  };\n\n  useEffect(() => {// document.querySelector(\"#root\").onclick = () => {\n    //     document.querySelector(\".s-modal\").style.display = \"none\";\n    // }\n  });\n  return React.createElement(React.Fragment, null, React.createElement(Notify, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), showNotify !== \"\" && React.createElement(Notify, {\n    class: \"on\",\n    text: showNotify,\n    clearMess: setShowNotify,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"s-modal js-welcom-modal ps-fixed\",\n    style: {\n      display: \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"s-modal--dialog js-modal--dialog wmx4 ps-relative\",\n    draggable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"s-modal--body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"choose-images\",\n    id: \"choose-images\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"s-btn s-btn__outline s-btn__hovero mt24 bd-none d-flex align-items-center\",\n    onClick: () => document.getElementById(\"img-gallery\").click(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: icon,\n    alt: \"icon-photo\",\n    width: \"24\",\n    style: {\n      background: \"#afafaf\",\n      borderRadius: \"50%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), \"\\xA0Choose\", React.createElement(\"input\", {\n    type: \"file\",\n    id: \"img-gallery\",\n    className: \"d-none\",\n    onChange: previewPhoto,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"preview-area\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    id: \"preview-img\",\n    style: {\n      maxWidth: \"400px\"\n    },\n    src: \"\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"s-modal--footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"wrap-btn-loading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"s-btn s-btn__outline s-btn__primary mt24 mr24\",\n    id: \"save-photo\",\n    onClick: saveImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Save img\"))), React.createElement(\"button\", {\n    className: \"s-modal--close s-btn js-modal-close ps-absolute\",\n    onClick: closeDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    className: \"svg-icon iconClearSm\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    d: \"M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7 12 3.41z\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }))))));\n};\n\nexport default ModalPopup;","map":{"version":3,"sources":["/opt/lampp/htdocs/Study_space/liars-ask-react/src/client/images-gallery/ModalPopup.js"],"names":["React","useEffect","useState","isAuthenticated","postUploadImage","Notify","ModalPopup","props","formData","FormData","showNotify","setShowNotify","closeDialog","document","querySelector","style","display","previewPhoto","event","reader","FileReader","onload","inputAvatar","getElementById","src","result","readAsDataURL","target","files","append","saveImg","userId","user","_id","token","btn","classList","add","then","res","imageURL","handleUploadedImage","message","remove","catch","err","click","icon","background","borderRadius","maxWidth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport icon from '../../images/icon-photo.svg';\nimport { isAuthenticated } from '../../controllers/userController';\nimport { postUploadImage } from '../../controllers/galleryController';\nimport Notify from '../components/Notify';\n\nconst ModalPopup = props => {\n    const formData = new FormData();\n    const [showNotify, setShowNotify] = useState(\"\");\n\n    const closeDialog = () => {\n        document.querySelector(\".s-modal\").style.display = \"none\";\n    }\n    \n    const previewPhoto = (event) => {\n        let reader = new FileReader();\n        reader.onload = function () {\n            let inputAvatar = document.getElementById('preview-img');\n            inputAvatar.src = reader.result;\n        }\n        reader.readAsDataURL(event.target.files[0]);\n        formData.append(\"photo\", event.target.files[0]);\n    }\n\n    const saveImg = () => {\n        let userId = isAuthenticated().user._id;\n        let token = isAuthenticated().token;\n        let btn = document.getElementById(\"wrap-btn-loading\");\n        btn.classList.add(\"btn-loading\");\n        postUploadImage(formData, userId, token)\n        .then( res => {\n            if(res.imageURL) {\n                closeDialog();\n                props.handleUploadedImage(res.imageURL);\n                setShowNotify(res.message)\n            }\n            btn.classList.remove(\"btn-loading\");\n        })\n        .catch( err => {\n            setShowNotify(\"Error occur\");\n            btn.classList.remove(\"btn-loading\");\n        })\n    }\n\n    useEffect( () => {\n        // document.querySelector(\"#root\").onclick = () => {\n        //     document.querySelector(\".s-modal\").style.display = \"none\";\n        // }\n    })\n    \n\n    return (\n        <>\n            <Notify />\n            {showNotify !== \"\" &&  <Notify class=\"on\" text={showNotify} clearMess={setShowNotify} />}\n            <div className=\"s-modal js-welcom-modal ps-fixed\" style={{display: \"none\"}}>\n                \n                <div\n                    className=\"s-modal--dialog js-modal--dialog wmx4 ps-relative\"\n                    draggable={true}\n                >\n                    {/* <h1 className=\"s-modal--header\">Upload your photo</h1> */}\n                    <div className=\"s-modal--body\">\n                        <div className=\"choose-images\" id=\"choose-images\">\n                            <div className=\"d-flex justify-content-center\">\n                                <button className=\"s-btn s-btn__outline s-btn__hovero mt24 bd-none d-flex align-items-center\" onClick={ () => document.getElementById(\"img-gallery\").click()}>\n                                    <img src={icon} alt=\"icon-photo\" width=\"24\" style={{ background: \"#afafaf\", borderRadius: \"50%\"}}/>&nbsp;Choose\n                                    <input type=\"file\" id=\"img-gallery\" className=\"d-none\" onChange={previewPhoto}/>\n                                </button>\n                            </div>\n                            <div className=\"preview-area\">\n                                <img id=\"preview-img\" style={{maxWidth: \"400px\"}} src=\"\" alt=\"\"/>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"s-modal--footer\">\n                        <div id=\"wrap-btn-loading\">\n                            <button\n                                className=\"s-btn s-btn__outline s-btn__primary mt24 mr24\"\n                                id=\"save-photo\"\n                                onClick={saveImg}\n                            >Save img</button>\n                        </div>\n                        \n                    </div>\n                    \n                    <button className=\"s-modal--close s-btn js-modal-close ps-absolute\" onClick={closeDialog}>\n                        <svg aria-hidden=\"true\" className=\"svg-icon iconClearSm\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path d=\"M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7 12 3.41z\"></path></svg>\n                    </button>\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ModalPopup;"]},"metadata":{},"sourceType":"module"}