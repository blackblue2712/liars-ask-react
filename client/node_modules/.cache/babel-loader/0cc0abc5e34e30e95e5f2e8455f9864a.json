{"ast":null,"code":"import _slicedToArray from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{putUpdateInfo}from'../../controllers/userController';import Notify from'../components/Notify';import Default from'../../images/default.png';import{isAuthenticated}from'../../controllers/userController';var UserDetailBasic=function UserDetailBasic(props){var userData=new FormData();var _props$userPayload=props.userPayload,email=_props$userPayload.email,fullname=_props$userPayload.fullname,_id=_props$userPayload._id;var photoUser=props.userPayload.photo;var _useState=useState(fullname),_useState2=_slicedToArray(_useState,2),ffullname=_useState2[0],setFullname=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),currentPassword=_useState4[0],setCurrentPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),photo=_useState6[0],setPhoto=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),showNotify=_useState8[0],setShowNotify=_useState8[1];var handleUpdateInfo=function handleUpdateInfo(){var bntLoading=document.getElementById(\"wrap-btn-loading\");bntLoading.classList.add(\"btn-loading\");try{userData.set(\"id\",_id);userData.set(\"fullname\",ffullname);userData.set(\"currentPassword\",currentPassword);userData.set(\"photo\",photo);putUpdateInfo(userData,isAuthenticated().token).then(function(res){setShowNotify(res.message);bntLoading.classList.remove(\"btn-loading\");}).catch(function(err){setShowNotify(\"Error occur\");bntLoading.classList.remove(\"btn-loading\");});}catch(err){console.log(err);setShowNotify(\"Error occur (console)\");bntLoading.classList.remove(\"btn-loading\");}};useEffect(function(){setFullname(fullname);},[props.userPayload.email]);var previewPhoto=function previewPhoto(event){var reader=new FileReader();reader.onload=function(){var inputAvatar=document.getElementById('user-photo');inputAvatar.src=reader.result;};reader.readAsDataURL(event.target.files[0]);setPhoto(event.target.files[0]);};return React.createElement(\"div\",{className:\"userInfoEditting bs-md\"},showNotify!==\"\"&&React.createElement(Notify,{class:\"on\",text:showNotify,clearMess:setShowNotify}),React.createElement(\"div\",{className:\"d-flex pb12 mb12 bdb-black\"},React.createElement(\"div\",{className:\"mr24\"},React.createElement(\"button\",{to:\"/users/1\",className:\"s-btn btn-change-avatar ps-relative\",onClick:function onClick(){return document.getElementById(\"photo\").click();}},React.createElement(\"img\",{className:\"bd50\",id:\"user-photo\",src:photoUser||Default,alt:\"avatar\"}),React.createElement(\"div\",{className:\"choose-image d-none\"}),React.createElement(\"input\",{className:\"d-none\",type:\"file\",name:\"photo\",id:\"photo\",onChange:previewPhoto}))),React.createElement(\"div\",{className:\"w-100\"},React.createElement(\"div\",{className:\"post-title ps-relative mb4\"},React.createElement(\"label\",{htmlFor:\"email\",className:\"s-label mb4\"},\"Email\",React.createElement(\"span\",{className:\"required-7sPBq3\"},\"*\"))),React.createElement(\"div\",{className:\"ps-relative mb16\"},React.createElement(\"input\",{id:\"email\",name:\"email\",type:\"text\",className:\"s-input w-100\",value:email,readOnly:true})),React.createElement(\"div\",{className:\"post-title ps-relative mb4\"},React.createElement(\"label\",{htmlFor:\"fullname\",className:\"s-label mb4\"},\"FULLNAME\")),React.createElement(\"div\",{className:\"ps-relative mb16\"},React.createElement(\"input\",{id:\"fullname\",name:\"fullname\",type:\"text\",className:\"s-input w-100\",value:ffullname,onChange:function onChange(e){return setFullname(e.target.value);}})),React.createElement(\"div\",{className:\"post-title ps-relative mb4\"},React.createElement(\"label\",{htmlFor:\"currentPassword\",className:\"s-label mb4\"},\"Current Password\",React.createElement(\"span\",{className:\"required-7sPBq3\"},\"*\"))),React.createElement(\"div\",{className:\"ps-relative mb16\"},React.createElement(\"input\",{id:\"currentPassword\",name:\"currentPassword\",type:\"password\",className:\"s-input w-100\",onChange:function onChange(e){return setCurrentPassword(e.target.value);}})))),React.createElement(\"div\",{className:\"d-flex w-100\"},React.createElement(\"button\",{type:\"button\",className:\"s-btn btn-sm btn-outlined colorRed\"},\"Delete Account\"),React.createElement(\"button\",{type:\"button\",className:\"s-btn btn-sm ml-auto btn-cancel\"},\"Cancel\"),React.createElement(\"div\",{id:\"wrap-btn-loading\",className:\"ps-relative\"},React.createElement(\"button\",{type:\"button\",className:\"s-btn btn-sm btn-outlined colorGreen\",onClick:handleUpdateInfo},\"Save\"))));};export default UserDetailBasic;","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/src/client/users/UserDetailBasic.js"],"names":["React","useState","useEffect","putUpdateInfo","Notify","Default","isAuthenticated","UserDetailBasic","props","userData","FormData","userPayload","email","fullname","_id","photoUser","photo","ffullname","setFullname","currentPassword","setCurrentPassword","setPhoto","showNotify","setShowNotify","handleUpdateInfo","bntLoading","document","getElementById","classList","add","set","token","then","res","message","remove","catch","err","console","log","previewPhoto","event","reader","FileReader","onload","inputAvatar","src","result","readAsDataURL","target","files","click","e","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { putUpdateInfo } from '../../controllers/userController';\nimport Notify from '../components/Notify';\nimport Default from '../../images/default.png';\nimport { isAuthenticated } from '../../controllers/userController';\n\nconst UserDetailBasic = (props) => {\n    const userData = new FormData();\n\n    const { email, fullname, _id } = props.userPayload;\n    const photoUser = props.userPayload.photo;\n    \n    const [ffullname, setFullname]              = useState(fullname);\n    const [currentPassword, setCurrentPassword] = useState(\"\");\n    const [photo, setPhoto] = useState(null);\n\n    const [showNotify, setShowNotify] = useState(\"\");\n\n    const handleUpdateInfo = () => {\n        let bntLoading = document.getElementById(\"wrap-btn-loading\");\n        bntLoading.classList.add(\"btn-loading\");\n        try {\n            userData.set(\"id\", _id);\n            userData.set(\"fullname\", ffullname);\n            userData.set(\"currentPassword\", currentPassword);\n            userData.set(\"photo\", photo);\n            putUpdateInfo(userData, isAuthenticated().token)\n            .then( res => {\n                setShowNotify(res.message);\n                bntLoading.classList.remove(\"btn-loading\");\n            })\n            .catch( err => {\n                setShowNotify(\"Error occur\");\n                bntLoading.classList.remove(\"btn-loading\");\n            })\n            \n        } catch (err) {\n            console.log(err);\n            setShowNotify(\"Error occur (console)\");\n            bntLoading.classList.remove(\"btn-loading\");\n        }\n    }\n\n    useEffect( () => {\n        setFullname(fullname);\n    },  [props.userPayload.email]);\n\n    const previewPhoto = (event) => {\n        let reader = new FileReader();\n        reader.onload = function () {\n            let inputAvatar = document.getElementById('user-photo');\n            inputAvatar.src = reader.result;\n        }\n        reader.readAsDataURL(event.target.files[0]);\n        setPhoto(event.target.files[0]);\n    }\n\n    \n    return (\n        \n        <div className=\"userInfoEditting bs-md\">\n            {showNotify !== \"\" &&  <Notify class=\"on\" text={showNotify} clearMess={setShowNotify} />}\n            <div className=\"d-flex pb12 mb12 bdb-black\">\n                <div className=\"mr24\">\n                    <button to=\"/users/1\" className=\"s-btn btn-change-avatar ps-relative\" onClick={() => document.getElementById(\"photo\").click()}>\n                        <img className=\"bd50\" id=\"user-photo\" src={photoUser || Default} alt=\"avatar\"/>\n                        <div className=\"choose-image d-none\"></div>\n                        <input\n                            className=\"d-none\" type=\"file\" name=\"photo\" id=\"photo\"\n                            onChange={previewPhoto}\n                        />\n                    </button>\n                </div>\n                <div className=\"w-100\">\n                    <div className=\"post-title ps-relative mb4\">\n                        <label htmlFor=\"email\" className=\"s-label mb4\">\n                            Email\n                            <span className=\"required-7sPBq3\">*</span>\n                        </label>\n                    </div>\n                    <div className=\"ps-relative mb16\">\n                        <input\n                            id=\"email\" name=\"email\" type=\"text\" className=\"s-input w-100\" value={email}\n                            readOnly\n                        />\n                    </div>\n                    <div className=\"post-title ps-relative mb4\">\n                        <label htmlFor=\"fullname\" className=\"s-label mb4\">\n                            FULLNAME\n                        </label>\n                    </div>\n                    <div className=\"ps-relative mb16\">\n                        <input\n                            id=\"fullname\" name=\"fullname\" type=\"text\" className=\"s-input w-100\" value={ffullname}\n                            onChange={ (e) => setFullname(e.target.value)}\n                        />\n                    </div>\n                    <div className=\"post-title ps-relative mb4\">\n                        <label htmlFor=\"currentPassword\" className=\"s-label mb4\">\n                            Current Password\n                            <span className=\"required-7sPBq3\">*</span>\n                        </label>\n                    </div>\n                    <div className=\"ps-relative mb16\">\n                        <input\n                            id=\"currentPassword\" name=\"currentPassword\" type=\"password\" className=\"s-input w-100\"\n                            onChange={ (e) => setCurrentPassword(e.target.value) }\n                        />\n                    </div>\n                </div>\n            </div>\n            \n            <div className=\"d-flex w-100\">\n                <button type=\"button\" className=\"s-btn btn-sm btn-outlined colorRed\">Delete Account</button>\n                <button type=\"button\" className=\"s-btn btn-sm ml-auto btn-cancel\">Cancel</button>\n                <div id=\"wrap-btn-loading\" className=\"ps-relative\">\n                    <button\n                        type=\"button\" className=\"s-btn btn-sm btn-outlined colorGreen\"\n                        onClick={handleUpdateInfo}\n                    >Save</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default UserDetailBasic;"]},"metadata":{},"sourceType":"module"}