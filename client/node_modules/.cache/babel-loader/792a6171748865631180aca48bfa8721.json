{"ast":null,"code":"import _classCallCheck from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{withRouter}from'react-router-dom';import UserInfo from'../users/UserInfo';import ReactMarkdown from'react-markdown';import CodeBlock from'../editor/CodeBlock';import{isAuthenticated}from'../../controllers/userController';import{voteAnswerUp}from'../../controllers/voteController';var AnswerItem=/*#__PURE__*/function(_React$Component){_inherits(AnswerItem,_React$Component);function AnswerItem(){var _this;_classCallCheck(this,AnswerItem);_this=_possibleConstructorReturn(this,_getPrototypeOf(AnswerItem).call(this));_this.handleAnswerVoteUp=function(){if(!isAuthenticated()){return _this.props.history.push(\"/auth\");}var ansId=_this.props.data._id;var userId=isAuthenticated().user._id;var token=isAuthenticated().token;voteAnswerUp(ansId,userId,token).then(function(res){console.log(res);if(res.message===\"Voted\"){_this.setState({count:res.votesLength,active:\"active\"});}else if(res.message===\"Unvoted\"){_this.setState({count:res.votesLength,active:\"\"});}});};_this.state={count:0,active:''};return _this;}_createClass(AnswerItem,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({count:this.props.data.votes.length});}},{key:\"render\",value:function render(){var _this$state=this.state,count=_this$state.count,active=_this$state.active;var ans=this.props.data;var isActive=\"\";if(isAuthenticated()){isActive=this.props.data.votes.indexOf(isAuthenticated().user._id)!==-1?\"active\":\"\";}return React.createElement(\"div\",{className:\"answer mt16 mb16\"},React.createElement(\"div\",{className:\"post-layout d-flex w-100\"},React.createElement(\"div\",{className:\"votecell post-layout--left mr24\"},React.createElement(\"div\",{className:\"js-voting\"},React.createElement(\"button\",{className:\"js-vote--up\",onClick:this.handleAnswerVoteUp},React.createElement(\"svg\",{\"aria-hidden\":\"true\",className:\"svg-icon m0 iconArrowUpLg \".concat(isActive,\" \").concat(active),width:\"36\",height:\"36\",viewBox:\"0 0 36 36\"},React.createElement(\"path\",{d:\"M2 26h32L18 10 2 26z\"}))),React.createElement(\"div\",{className:\"vote-count\"},count))),React.createElement(\"div\",{className:\"votecell post-layout--right w-100\"},React.createElement(\"div\",{className:\"post-text md-content\"},React.createElement(ReactMarkdown,{source:ans.body,renderers:{code:CodeBlock}})),React.createElement(\"div\",{className:\"d-flex justify-content-end\"},React.createElement(UserInfo,{username:ans.owner.email// userLocation=\"Bratislava, Slovakia\"\n,userImage:ans.owner.photo,userFullname:ans.owner.fullname,userId:ans.owner._id})))));}}]);return AnswerItem;}(React.Component);export default withRouter(AnswerItem);","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/src/client/questions/AnswerItem.js"],"names":["React","withRouter","UserInfo","ReactMarkdown","CodeBlock","isAuthenticated","voteAnswerUp","AnswerItem","handleAnswerVoteUp","props","history","push","ansId","data","_id","userId","user","token","then","res","console","log","message","setState","count","votesLength","active","state","votes","length","ans","isActive","indexOf","body","code","owner","email","photo","fullname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport UserInfo from '../users/UserInfo';\nimport ReactMarkdown from 'react-markdown';\nimport CodeBlock from '../editor/CodeBlock';\nimport { isAuthenticated } from '../../controllers/userController';\nimport { voteAnswerUp } from '../../controllers/voteController';\n\nclass AnswerItem extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            count: 0,\n            active: ''\n        }\n    }\n\n    componentDidMount() {\n        this.setState( {count: this.props.data.votes.length} );\n    }\n\n    handleAnswerVoteUp = () => {\n        if(!isAuthenticated()) {\n            return this.props.history.push(\"/auth\");\n        }\n        let ansId = this.props.data._id;\n        let userId = isAuthenticated().user._id;\n        let token = isAuthenticated().token;\n        voteAnswerUp(ansId, userId, token)\n        .then( res => {\n            console.log(res);\n            if(res.message === \"Voted\") {\n                this.setState( {count: res.votesLength, active: \"active\"} );\n            } else if(res.message === \"Unvoted\") {\n                this.setState( {count: res.votesLength, active: \"\"} );\n            }\n        })\n    }\n    \n    render() {\n        const { count, active } = this.state;\n        const ans = this.props.data;\n        let isActive = \"\";\n        if(isAuthenticated()) {\n            isActive = this.props.data.votes.indexOf(isAuthenticated().user._id) !== -1 ? \"active\" : \"\";\n        }\n        return (\n            <div className=\"answer mt16 mb16\">\n                <div className=\"post-layout d-flex w-100\">\n                    <div className=\"votecell post-layout--left mr24\">\n                        <div className=\"js-voting\">\n                            <button\n                                className=\"js-vote--up\"\n                                onClick={this.handleAnswerVoteUp}\n                            >\n                                <svg aria-hidden=\"true\" className={`svg-icon m0 iconArrowUpLg ${isActive} ${active}`} width=\"36\" height=\"36\" viewBox=\"0 0 36 36\"><path d=\"M2 26h32L18 10 2 26z\"></path></svg>\n                            </button>\n                            <div className=\"vote-count\">{count}</div>\n                            {/* <button className=\"js-vote--down\">\n                                <svg aria-hidden=\"true\" className=\"svg-icon m0 iconArrowDownLg\" width=\"36\" height=\"36\" viewBox=\"0 0 36 36\"><path d=\"M2 10h32L18 26 2 10z\"></path></svg>\n                            </button> */}\n                        </div>\n                    </div>\n                    <div className=\"votecell post-layout--right w-100\">\n                        <div className=\"post-text md-content\">\n                            <ReactMarkdown source={ans.body} renderers={{ code: CodeBlock }} />\n                        </div>\n                        <div className=\"d-flex justify-content-end\">\n                            <UserInfo\n                                username={ans.owner.email}\n                                // userLocation=\"Bratislava, Slovakia\"\n                                userImage={ans.owner.photo}\n                                userFullname={ans.owner.fullname}\n                                userId={ans.owner._id}\n                            />\n                        </div>\n                    \n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}   \n\nexport default withRouter(AnswerItem);"]},"metadata":{},"sourceType":"module"}