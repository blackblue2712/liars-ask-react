{"ast":null,"code":"import _classCallCheck from\"/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{isAuthenticated}from'../../controllers/userController';import{getRequestUpgradeToSpecialAccount,postAcceptRequestUpgradeToSpecialAccount,postRejectRequestUpgradeToSpecialAccount}from'../../controllers/requestUpgrade';import{Link}from'react-router-dom';import Notify from'../components/Notify';var RequestUpgrade=/*#__PURE__*/function(_Component){_inherits(RequestUpgrade,_Component);function RequestUpgrade(){var _this;_classCallCheck(this,RequestUpgrade);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestUpgrade).call(this));_this.clearMess=function(){_this.setState({message:\"\"});};_this.handleAcceptRequest=function(rid,receiver,orderBt){var confirm=window.confirm(\"Are you sure to accpet this request?\");if(confirm){try{var wrapBt=document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"]\"));if(typeof wrapBt!==undefined){wrapBt.classList.add(\"loading-request\");wrapBt.firstElementChild.style.opacity=0;}var _isAuthenticated$user=isAuthenticated().user,photo=_isAuthenticated$user.photo,_id=_isAuthenticated$user._id;var name=isAuthenticated().user.fullname||isAuthenticated().user.email;var token=isAuthenticated().token;postAcceptRequestUpgradeToSpecialAccount({owner:_id,photo:photo,name:name,rid:rid,receiver:receiver},token).then(function(res){if(typeof wrapBt!==undefined){wrapBt.classList.remove(\"loading-request\");wrapBt.firstElementChild.style.opacity=1;document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"] button.accept-request\")).style.stroke=\"yellow\";document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"] button.reject-request\")).style.stroke=\"#d2d2d2\";}_this.setState({message:res.message});});}catch(err){console.log(err);}}};_this.handleRejectRequest=function(rid,receiver,orderBt){var confirm=window.confirm(\"Are you sure to reject this request?\");if(confirm){try{var wrapBt=document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"]\"));if(typeof wrapBt!==undefined){wrapBt.classList.add(\"loading-request\");wrapBt.firstElementChild.style.opacity=0;}var _isAuthenticated$user2=isAuthenticated().user,photo=_isAuthenticated$user2.photo,_id=_isAuthenticated$user2._id;var name=isAuthenticated().user.fullname||isAuthenticated().user.email;var token=isAuthenticated().token;postRejectRequestUpgradeToSpecialAccount({owner:_id,photo:photo,name:name,rid:rid,receiver:receiver},token).then(function(res){if(typeof wrapBt!==undefined){wrapBt.classList.remove(\"loading-request\");wrapBt.firstElementChild.style.opacity=1;document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"] button.reject-request\")).style.stroke=\"red\";document.querySelector(\"td[data-number=\\\"\".concat(orderBt,\"\\\"] button.accept-request\")).style.stroke=\"#d2d2d2\";}_this.setState({message:res.message});});}catch(err){console.log(err);}}};_this.state={request:[],message:\"\"};return _this;}_createClass(RequestUpgrade,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;getRequestUpgradeToSpecialAccount(isAuthenticated().token).then(function(list){_this2.setState({request:list});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this3=this;var listReq=this.state.request;var message=this.state.message;return React.createElement(React.Fragment,null,React.createElement(Notify,null),message!==\"\"&&React.createElement(Notify,{class:\"on\",text:message,clearMess:this.clearMess}),React.createElement(\"div\",{className:\"main-head\"},React.createElement(\"div\",{className:\"grid d-flex align-items-centers mb16\"},React.createElement(\"h1\",{className:\"fs-headline1 mr-auto\"},\"Admin control\")),React.createElement(\"p\",{className:\"mb24 f13 fw350\"},\"Admin page /@ liars aks react\")),React.createElement(\"div\",{className:\"list-reuqest\"},React.createElement(\"table\",{style:{textAlign:\"center\",width:\"100%\",borderCollapse:\"collapse\"},cellpadding:\"6\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Owner\"),React.createElement(\"th\",null,\"Description\"),React.createElement(\"th\",null,\"Photo\"),React.createElement(\"th\",null,\"Time\"),React.createElement(\"th\",null,\"Status\"),React.createElement(\"th\",null,\"Handle\"))),React.createElement(\"tbody\",null,listReq.map(function(rq,i){var classStroke=rq.status===0?\"\":rq.status===1?\"stroke-yellow\":rq.status===2?\"stroke-green\":\"stroke-red\";return React.createElement(\"tr\",{key:i,style:{borderBottom:\"1px solid #d6d9dc\"},className:\"ps-relative\"},React.createElement(\"td\",null,React.createElement(Link,{to:\"/users/\".concat(rq.owner._id)},rq.owner.fullname||rq.owner.email),\" - \",rq.email),React.createElement(\"td\",{style:{\"width\":\"400px\"}},rq.description),React.createElement(\"td\",null,React.createElement(\"img\",{width:\"150\",className:\"rq-photo\",src:rq.photo})),React.createElement(\"td\",null,new Date(rq.created).toLocaleDateString()),React.createElement(\"td\",null,rq.statusString),React.createElement(\"td\",{\"data-number\":i},classStroke===\"\"?React.createElement(\"div\",{className:\"wrap-button-handle-able\"},React.createElement(\"button\",{role:\"handle-request\",className:\"accept-request\",onClick:function onClick(){return _this3.handleAcceptRequest(rq._id,rq.owner._id,i);}},React.createElement(\"svg\",{className:\"svg-icont\",viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"}))),React.createElement(\"button\",{role:\"handle-request\",className:\"reject-request\",onClick:function onClick(){return _this3.handleRejectRequest(rq._id,rq.owner._id,i);}},React.createElement(\"svg\",{className:\"svg-icont\",viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"})))):classStroke===\"stroke-green\"||classStroke===\"stroke-yellow\"?React.createElement(React.Fragment,null,React.createElement(\"button\",{role:\"handle-request\",className:\"accept-request\"},React.createElement(\"svg\",{className:\"svg-icont \".concat(classStroke),viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"}))),React.createElement(\"button\",{role:\"handle-request\",className:\"reject-request\"},React.createElement(\"svg\",{className:\"svg-icont stroke-d2d2d2\",viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"})))):React.createElement(React.Fragment,null,React.createElement(\"button\",{role:\"handle-request\",className:\"accept-request stroke-d2d2d2\"},React.createElement(\"svg\",{className:\"svg-icont\",viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"}))),React.createElement(\"button\",{role:\"handle-request\",className:\"reject-request \".concat(classStroke)},React.createElement(\"svg\",{className:\"svg-icont\",viewBox:\"0 0 20 20\"},React.createElement(\"path\",{d:\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"}))))));})))),React.createElement(\"div\",{className:\"clear-fix\"}),React.createElement(\"div\",{className:\"nearfooter\",style:{maxWidth:\"calc(100% - 300px - 24px)\",padding:\"40px 0px\"}},React.createElement(\"p\",null,\"Looking for more? Browse\",React.createElement(\"a\",{style:{color:\"#3af\"},href:\"#a\"},\" the complete list of questions\"),\", or\",React.createElement(\"a\",{style:{color:\"#3af\"},href:\"#a\"},\" popular tags \"),\".Help us answer\",React.createElement(\"a\",{style:{color:\"#3af\"},href:\"#a\"},\" unanswered questions\"),\".\")));}}]);return RequestUpgrade;}(Component);export default RequestUpgrade;","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/liars-ask-react-deploy/src/admin/request/RequestUpgrade.js"],"names":["React","Component","isAuthenticated","getRequestUpgradeToSpecialAccount","postAcceptRequestUpgradeToSpecialAccount","postRejectRequestUpgradeToSpecialAccount","Link","Notify","RequestUpgrade","clearMess","setState","message","handleAcceptRequest","rid","receiver","orderBt","confirm","window","wrapBt","document","querySelector","undefined","classList","add","firstElementChild","style","opacity","user","photo","_id","name","fullname","email","token","owner","then","res","remove","stroke","err","console","log","handleRejectRequest","state","request","list","catch","listReq","textAlign","width","borderCollapse","map","rq","i","classStroke","status","borderBottom","description","Date","created","toLocaleDateString","statusString","maxWidth","padding","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { isAuthenticated } from '../../controllers/userController';\nimport {\n    getRequestUpgradeToSpecialAccount,\n    postAcceptRequestUpgradeToSpecialAccount,\n    postRejectRequestUpgradeToSpecialAccount\n} from '../../controllers/requestUpgrade';\n\nimport { Link } from 'react-router-dom';\nimport Notify from '../components/Notify';\n\nclass RequestUpgrade extends Component {\n    constructor () {\n        super();\n        this.state = {\n            request: [],\n            message: \"\",\n        }\n    }\n\n    clearMess = () => {\n        this.setState( {message: \"\"} );\n    }\n\n    componentDidMount () {\n        getRequestUpgradeToSpecialAccount(isAuthenticated().token)\n        .then( list => {\n            this.setState({request: list})\n        })\n        .catch(err => console.log(err))\n    }\n\n\n    handleAcceptRequest = (rid, receiver, orderBt) => {\n        let confirm = window.confirm(\"Are you sure to accpet this request?\");\n        if(confirm) {\n            try {\n                let wrapBt = document.querySelector(`td[data-number=\"${orderBt}\"]`);\n                if(typeof wrapBt !== undefined) {\n                    wrapBt.classList.add(\"loading-request\");\n                    wrapBt.firstElementChild.style.opacity = 0;\n                }\n\n                let { photo, _id } = isAuthenticated().user;\n                let name = isAuthenticated().user.fullname || isAuthenticated().user.email;\n                let token = isAuthenticated().token;\n\n                postAcceptRequestUpgradeToSpecialAccount({owner: _id, photo, name, rid, receiver}, token)\n                .then( res => {\n                    if(typeof wrapBt !== undefined) {\n                        wrapBt.classList.remove(\"loading-request\");\n                        wrapBt.firstElementChild.style.opacity = 1;\n                        document.querySelector(`td[data-number=\"${orderBt}\"] button.accept-request`).style.stroke = \"yellow\";\n                        document.querySelector(`td[data-number=\"${orderBt}\"] button.reject-request`).style.stroke = \"#d2d2d2\";\n                    }\n                    this.setState( {message: res.message} );\n                })\n            } catch(err) {\n                console.log(err);\n            }\n            \n        }\n    }\n\n    handleRejectRequest = (rid, receiver, orderBt) => {\n        let confirm = window.confirm(\"Are you sure to reject this request?\");\n        if(confirm) {\n            try {\n                let wrapBt = document.querySelector(`td[data-number=\"${orderBt}\"]`);\n                if(typeof wrapBt !== undefined) {\n                    wrapBt.classList.add(\"loading-request\");\n                    wrapBt.firstElementChild.style.opacity = 0;\n                }\n\n                let { photo, _id } = isAuthenticated().user;\n                let name = isAuthenticated().user.fullname || isAuthenticated().user.email;\n                let token = isAuthenticated().token;\n\n                postRejectRequestUpgradeToSpecialAccount({owner: _id, photo, name, rid, receiver}, token)\n                .then( res => {\n                    if(typeof wrapBt !== undefined) {\n                        wrapBt.classList.remove(\"loading-request\");\n                        wrapBt.firstElementChild.style.opacity = 1;\n                        document.querySelector(`td[data-number=\"${orderBt}\"] button.reject-request`).style.stroke = \"red\";\n                        document.querySelector(`td[data-number=\"${orderBt}\"] button.accept-request`).style.stroke = \"#d2d2d2\";\n                    }\n                    this.setState( {message: res.message} );\n                })\n            } catch (err) {\n                console.log(err);\n            }\n        }\n    }\n\n    render() {\n        const listReq = this.state.request;\n        const { message } = this.state;\n        return (\n            <>\n                <Notify />  \n                {message !== \"\" &&  <Notify class=\"on\" text={message} clearMess={this.clearMess} />}\n                <div className=\"main-head\">\n                    <div className=\"grid d-flex align-items-centers mb16\">\n                        <h1 className=\"fs-headline1 mr-auto\">Admin control</h1>\n                    </div>\n                    <p className=\"mb24 f13 fw350\">Admin page /@ liars aks react</p>\n                </div>\n                <div className=\"list-reuqest\">\n                    <table style={{textAlign: \"center\", width: \"100%\", borderCollapse: \"collapse\"}}  cellpadding=\"6\">\n                        <thead>\n                            <tr>\n                                <th>Owner</th>\n                                <th>Description</th>\n                                <th>Photo</th>\n                                <th>Time</th>\n                                <th>Status</th>\n                                <th>Handle</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                listReq.map( (rq, i) => {\n                                    let classStroke = rq.status === 0 ? \"\" : rq.status === 1 ? \"stroke-yellow\" : rq.status === 2 ? \"stroke-green\" : \"stroke-red\";\n                                    return (\n                                        <tr key={i} style={{borderBottom: \"1px solid #d6d9dc\"}} className=\"ps-relative\">\n                                            <td><Link to={`/users/${rq.owner._id}`}>{rq.owner.fullname || rq.owner.email}</Link> - {rq.email}</td>\n                                            <td style={{\"width\": \"400px\"}}>{rq.description}</td>\n                                            <td><img width=\"150\" className=\"rq-photo\" src={rq.photo} /></td>\n                                            <td>{new Date(rq.created).toLocaleDateString()}</td>\n                                            <td>{rq.statusString}</td>\n                                            <td data-number={i}>\n                                                {\n                                                    classStroke === \"\" ? <div className=\"wrap-button-handle-able\">\n                                                        <button role=\"handle-request\" className=\"accept-request\" onClick={() => this.handleAcceptRequest(rq._id, rq.owner._id, i)}>\n                                                            <svg className={`svg-icont`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"></path>\n                                                            </svg>\n                                                        </button>\n\n                                                        <button role=\"handle-request\" className=\"reject-request\" onClick={() => this.handleRejectRequest(rq._id, rq.owner._id, i)}>\n                                                            <svg className={`svg-icont`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"></path>\n                                                            </svg>\n                                                        </button>\n                                                    </div> : classStroke === \"stroke-green\" || classStroke === \"stroke-yellow\" ? <>\n                                                        <button role=\"handle-request\" className=\"accept-request\">\n                                                            <svg className={`svg-icont ${classStroke}`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"></path>\n                                                            </svg>\n                                                        </button>\n                                                        <button role=\"handle-request\" className=\"reject-request\">\n                                                            <svg className={`svg-icont stroke-d2d2d2`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"></path>\n                                                            </svg>\n                                                        </button>\n                                                    </> : <>\n                                                        <button role=\"handle-request\" className=\"accept-request stroke-d2d2d2\">\n                                                            <svg className={`svg-icont`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.219,1.688c-4.471,0-8.094,3.623-8.094,8.094s3.623,8.094,8.094,8.094s8.094-3.623,8.094-8.094S14.689,1.688,10.219,1.688 M10.219,17.022c-3.994,0-7.242-3.247-7.242-7.241c0-3.994,3.248-7.242,7.242-7.242c3.994,0,7.241,3.248,7.241,7.242C17.46,13.775,14.213,17.022,10.219,17.022 M15.099,7.03c-0.167-0.167-0.438-0.167-0.604,0.002L9.062,12.48l-2.269-2.277c-0.166-0.167-0.437-0.167-0.603,0c-0.166,0.166-0.168,0.437-0.002,0.603l2.573,2.578c0.079,0.08,0.188,0.125,0.3,0.125s0.222-0.045,0.303-0.125l5.736-5.751C15.268,7.466,15.265,7.196,15.099,7.03\"></path>\n                                                            </svg>\n                                                        </button>\n\n                                                        <button role=\"handle-request\" className={`reject-request ${classStroke}`}>\n                                                            <svg className={`svg-icont`} viewBox=\"0 0 20 20\">\n                                                                <path d=\"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z\"></path>\n                                                            </svg>\n                                                        </button>\n                                                    </>\n                                                }\n                                                \n                                            </td>\n                                        </tr>     \n                                    )\n                                })\n                            }\n                        </tbody>\n                    </table>\n                </div>\n                <div className=\"clear-fix\"></div>\n                <div className=\"nearfooter\" style={{maxWidth: \"calc(100% - 300px - 24px)\", padding: \"40px 0px\"}}>\n                    <p>\n                        Looking for more? Browse \n                        <a style={{ color: \"#3af\" }} href=\"#a\"> the complete list of questions</a>\n                        , or\n                        <a style={{ color: \"#3af\" }} href=\"#a\"> popular tags </a>\n                        .Help us answer \n                        <a style={{ color: \"#3af\" }} href=\"#a\"> unanswered questions</a>\n                        .\n                    </p>\n                </div>\n                \n            </>\n            \n        )\n    }\n}\n\nexport default RequestUpgrade;"]},"metadata":{},"sourceType":"module"}