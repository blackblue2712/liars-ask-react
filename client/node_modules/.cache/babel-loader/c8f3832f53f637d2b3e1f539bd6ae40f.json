{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/images-gallery/ImagesGallery.js\";\nimport React from 'react';\nimport \"./ImagesGallery.css\";\nimport ModalPopup from './ModalPopup';\nimport { getUploadImages } from '../../controllers/galleryController';\nimport { isAuthenticated } from '../../controllers/userController';\nimport Copy from '../../images/copy.png';\nimport Copy1 from '../../images/copy1.png';\nimport Close from '../../images/close.png';\nimport Notify from '../components/Notify';\nimport ImgCloud from '../../images/cloud1.png';\nimport { putDeleteUploadedImage } from '../../controllers/galleryController';\n\nclass ImagesGallery extends React.Component {\n  constructor() {\n    super();\n\n    this.clearMess = () => {\n      this.setState({\n        message: \"\"\n      });\n    };\n\n    this.handleUploadedImage = url => {\n      this.setState({\n        images: [[url, ...this.arrImgs1], this.arrImgs2, this.arrImgs3, this.arrImgs4]\n      });\n    };\n\n    this.handleCopyText = text => {\n      navigator.clipboard.writeText(text).then(function () {\n        document.getElementById(text).src = Copy;\n      }, function (err) {});\n    };\n\n    this.handleDeleteUploadedImage = (img, i) => {\n      let flag = window.confirm(\"Are you sure to delete this photo?\");\n\n      if (flag) {\n        try {\n          let userId = isAuthenticated().user._id;\n\n          let token = isAuthenticated().token;\n          let photoName = img.split(\"/\")[img.split(\"/\").length - 1].split(\".\")[0];\n          let wrap = document.querySelector(\".card-count-\" + i);\n          wrap.classList.add(\"btn-loading\");\n          putDeleteUploadedImage(userId, {\n            img,\n            photoName\n          }, token).then(res => {\n            if (res.message === \"Photo deleted\") {\n              wrap.remove();\n            }\n\n            this.setState({\n              message: res.message\n            });\n          });\n        } catch (err) {\n          console.log(err);\n          let wrap = document.querySelector(\".card-count-\" + i);\n          wrap.classList.remove(\"btn-loading\");\n          this.setState({\n            message: \"Error occur (console)\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      images: [],\n      message: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    let usreId = isAuthenticated().user._id;\n\n    let data = await getUploadImages(usreId);\n    this.arrImgs1 = [];\n    this.arrImgs2 = [];\n    this.arrImgs3 = [];\n    this.arrImgs4 = []; // try 4 for loop\n\n    if (data.images && data.images.length > 4) {\n      for (let i = 0; i < data.images.length; i += 4) {\n        this.arrImgs1 = [...this.arrImgs1, data.images[i]];\n\n        if (data.images[i + 1] !== undefined) {\n          this.arrImgs2 = [...this.arrImgs2, data.images[i + 1]];\n\n          if (data.images[i + 2] !== undefined) {\n            this.arrImgs3 = [...this.arrImgs3, data.images[i + 2]];\n\n            if (data.images[i + 3] !== undefined) {\n              this.arrImgs4 = [...this.arrImgs4, data.images[i + 3]];\n            }\n          }\n        }\n      }\n\n      this.setState({\n        images: [this.arrImgs1, this.arrImgs2, this.arrImgs3, this.arrImgs4]\n      });\n    } else if (data.images && data.images.length <= 4) {\n      this.arrImgs1 = data.images;\n      this.setState({\n        images: [this.arrImgs1]\n      });\n    }\n  }\n\n  render() {\n    let _this$state = this.state,\n        images = _this$state.images,\n        message = _this$state.message;\n    return React.createElement(\"div\", {\n      id: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Notify, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), message !== \"\" && React.createElement(Notify, {\n      class: \"on\",\n      text: message,\n      clearMess: this.clearMess,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"grid d-flex align-items-centers mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"fs-headline1 mr-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Images Gallery\"), React.createElement(\"button\", {\n      className: \"s-btn s-btn__outline s-btn__primary s-btn__primary d-flex align-items-center\",\n      onClick: () => document.getElementsByClassName(\"js-welcom-modal\")[0].style.display = \"block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: ImgCloud,\n      width: \"18\",\n      alt: \"upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), \"\\xA0Upload photo\")), React.createElement(\"p\", {\n      className: \"mb24 f13 fw350\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      id: \"images-gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(ModalPopup, {\n      handleUploadedImage: this.handleUploadedImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mini-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, images.map((arr, i) => {\n      return React.createElement(\"div\", {\n        className: \"grid-column\",\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, arr.map((img, i) => {\n        let r = Math.random().toString(36).substring(7);\n        return React.createElement(\"div\", {\n          className: \"image-card ps-relative card-count-\".concat(r),\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"s-btn s-btn__outline s-btn__hovero bd-none p-absolute btn-copy d-none\",\n          onClick: () => this.handleCopyText(img),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: Copy1,\n          width: 30,\n          alt: \"img-copy\",\n          id: img,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"s-btn s-btn__outline s-btn__hovero bd-none p-absolute btn-close d-none\",\n          onClick: () => this.handleDeleteUploadedImage(img, r),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: Close,\n          width: 30,\n          alt: \"img-delete\",\n          title: \"delete this photo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        })), React.createElement(\"img\", {\n          width: \"220\",\n          className: \"w-220 single-image\",\n          src: img,\n          alt: \"imgs-gallery\",\n          loading: \"lazy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"image-url\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, img)));\n      }));\n    }))), React.createElement(\"div\", {\n      className: \"clear-fix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ImagesGallery;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/images-gallery/ImagesGallery.js"],"names":["React","ModalPopup","getUploadImages","isAuthenticated","Copy","Copy1","Close","Notify","ImgCloud","putDeleteUploadedImage","ImagesGallery","Component","constructor","clearMess","setState","message","handleUploadedImage","url","images","arrImgs1","arrImgs2","arrImgs3","arrImgs4","handleCopyText","text","navigator","clipboard","writeText","then","document","getElementById","src","err","handleDeleteUploadedImage","img","i","flag","window","confirm","userId","user","_id","token","photoName","split","length","wrap","querySelector","classList","add","res","remove","console","log","state","componentDidMount","usreId","data","undefined","render","getElementsByClassName","style","display","map","arr","r","Math","random","toString","substring"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./ImagesGallery.css\";\nimport ModalPopup from './ModalPopup';\nimport  { getUploadImages } from '../../controllers/galleryController';\nimport { isAuthenticated } from '../../controllers/userController';\nimport Copy from '../../images/copy.png';\nimport Copy1 from '../../images/copy1.png';\nimport Close from '../../images/close.png';\nimport Notify from '../components/Notify';\nimport ImgCloud from '../../images/cloud1.png';\nimport { putDeleteUploadedImage } from '../../controllers/galleryController';\n\nclass ImagesGallery extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            images: [],\n            message: \"\"\n        }\n    }\n\n    clearMess = () => {\n        this.setState( {message: \"\"} );\n    }\n\n    handleUploadedImage = (url) => {\n        this.setState( {images: [[url,...this.arrImgs1], this.arrImgs2, this.arrImgs3, this.arrImgs4]} )\n    }\n\n    async componentDidMount() {\n        let usreId = isAuthenticated().user._id;\n        let data = await getUploadImages(usreId);\n        \n        this.arrImgs1 = [];\n        this.arrImgs2 = [];\n        this.arrImgs3 = [];\n        this.arrImgs4 = [];\n\n        // try 4 for loop\n        if(data.images && data.images.length > 4) {\n            for(let i = 0; i < data.images.length; i+=4) {\n                this.arrImgs1 = [...this.arrImgs1, data.images[i]];\n                if(data.images[i+1] !== undefined) {\n                    this.arrImgs2 = [...this.arrImgs2, data.images[i+1]];\n                    if(data.images[i+2] !== undefined) {\n                        this.arrImgs3 = [...this.arrImgs3, data.images[i+2]];\n                        if(data.images[i+3] !== undefined) {\n                            this.arrImgs4 = [...this.arrImgs4, data.images[i+3]];\n                        }\n                    }\n                }\n            }\n            this.setState( {images: [this.arrImgs1, this.arrImgs2, this.arrImgs3, this.arrImgs4]} );\n        } else if(data.images && data.images.length <= 4) {\n            this.arrImgs1 = data.images\n            this.setState( {images: [this.arrImgs1]} );\n        }\n\n    }\n\n    handleCopyText = (text) => {\n        navigator\n            .clipboard\n            .writeText(text)\n            .then(function() {\n                document.getElementById(text).src = Copy;\n            }, function(err) {\n                \n            });\n    }\n\n    handleDeleteUploadedImage = (img, i) => {\n        let flag = window.confirm(\"Are you sure to delete this photo?\");\n        if(flag) {\n            try {\n                let userId = isAuthenticated().user._id;\n                let token = isAuthenticated().token;\n                let photoName = img.split(\"/\")[img.split(\"/\").length - 1].split(\".\")[0];\n                \n                let wrap = document.querySelector(\".card-count-\" + i);\n                wrap.classList.add(\"btn-loading\");\n                putDeleteUploadedImage(userId, {img, photoName}, token)\n                .then( res => {\n                    if(res.message === \"Photo deleted\") {\n                        wrap.remove();\n                    }\n                    this.setState( {message: res.message} );\n                })\n            } catch(err) {\n                console.log(err);\n                let wrap = document.querySelector(\".card-count-\" + i);\n                wrap.classList.remove(\"btn-loading\");\n                this.setState( {message: \"Error occur (console)\"} );\n            }\n        }\n    }\n\n    render() {\n        let { images, message } = this.state;\n        \n        return (\n            <div id=\"content\">\n                <div className=\"main-head\">\n                    <Notify />  \n                    {message !== \"\" &&  <Notify class=\"on\" text={message} clearMess={this.clearMess} />}\n                    <div className=\"grid d-flex align-items-centers mb16\">\n                        <h1 className=\"fs-headline1 mr-auto\">Images Gallery</h1>\n                        <button\n                            className=\"s-btn s-btn__outline s-btn__primary s-btn__primary d-flex align-items-center\"\n                            onClick={() => document.getElementsByClassName(\"js-welcom-modal\")[0].style.display = \"block\"}\n                        >\n                            <img src={ImgCloud} width=\"18\" alt=\"upload\" />&nbsp;Upload photo\n                        </button>\n                    </div>\n                    <p className=\"mb24 f13 fw350\">\n                        <hr/>\n                    </p>\n                </div>\n\n                {/* LIST WRAPPER  */}\n                <div id=\"images-gallery\">\n                    <ModalPopup handleUploadedImage={this.handleUploadedImage} />\n                    <div className=\"mini-list\">\n                        {/* LIST ITEM */}\n                        {\n                            images.map( (arr, i) => {\n                                return (\n                                    <div className=\"grid-column\" key={i}>\n                                        {\n                                            arr.map( (img, i) => {\n                                                let r = Math.random().toString(36).substring(7);\n                                                return (\n                                                    <div className={`image-card ps-relative card-count-${r}`} key={i}>\n                                                        <button\n                                                            className=\"s-btn s-btn__outline s-btn__hovero bd-none p-absolute btn-copy d-none\"\n                                                            onClick={() => this.handleCopyText(img)}\n                                                        >\n                                                            <img src={Copy1} width={30} alt=\"img-copy\" id={img}/>\n                                                        </button>\n                                                        <button\n                                                            className=\"s-btn s-btn__outline s-btn__hovero bd-none p-absolute btn-close d-none\"\n                                                            onClick={() => this.handleDeleteUploadedImage(img, r)}\n                                                        >\n                                                            <img src={Close} width={30} alt=\"img-delete\" title=\"delete this photo\"/>\n                                                        </button>\n                                                        <img width=\"220\" className=\"w-220 single-image\" src={img} alt=\"imgs-gallery\" loading=\"lazy\"/>\n                                                        <div className=\"image-url\">\n                                                            <span>{img}</span>\n                                                        </div>\n                                                    </div>\n                                                )\n                                            })\n                                        }\n                                    </div>\n                                )\n                            })\n                        }\n\n                    </div>\n                </div>\n\n                <div className=\"clear-fix\"></div>\n            </div>\n        )\n    }\n}\n\nexport default ImagesGallery;"]},"metadata":{},"sourceType":"module"}