{"ast":null,"code":"import _slicedToArray from \"/opt/lampp/htdocs/Study_space/liars-ask-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/opt/lampp/htdocs/Study_space/liars-ask-react/src/client/auth/Auth.js\";\nimport React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { withRouter } from 'react-router-dom';\nimport './style.css';\n\nwindow.onload = () => {\n  const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n  inputRequireDom.slice(0, inputRequireDom.length - 1).map(ip => {\n    return ip.required = true;\n  });\n};\n\nconst handleChangeUI = next => {\n  return () => {\n    let eres = document.querySelector(\"#form-reg\");\n    let esig = document.querySelector(\"#form-sig\");\n    let efor = document.querySelector(\"#form-for\");\n\n    if (next === \"reg\") {\n      eres.classList.remove(\"d-none\");\n      esig.classList.add(\"d-none\");\n    } else if (next === \"sig\") {\n      esig.classList.remove(\"d-none\");\n      eres.classList.add(\"d-none\");\n    } else {\n      efor.classList.remove(\"d-none\");\n      esig.classList.add(\"d-none\");\n    }\n  };\n};\n\nconst Auth = props => {\n  // Check is autheticated\n  if (isAuthenticated()) {\n    props.history.push(\"/\");\n  }\n\n  const handleSubmit = (email, password) => {\n    window.event.preventDefault();\n    postSignin({\n      email,\n      password\n    }).then(res => {\n      if (!res.payload) {\n        alert(res.message);\n      } else {\n        authenticate(res.payload, () => {\n          props.history.push(\"/\");\n        });\n      }\n    });\n  };\n\n  const handleRegister = (email, password, passwordAg) => {\n    window.event.preventDefault();\n    let patt = /\\d+/;\n\n    if (password.match(patt) === null || password.length < 6) {\n      alert(\"password have at least 6 characters and must contain 1 number\");\n    } else if (password !== passwordAg) {\n      alert(\"password and password again do not match!\");\n    } else {\n      postSignup({\n        email,\n        password\n      }).then(res => {\n        if (res && !res.payload) {\n          alert(res.message);\n        } else {\n          //\n          handleChangeUI()();\n        }\n      });\n    }\n  };\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        r_email = _useState6[0],\n        r_setEmail = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        r_password = _useState8[0],\n        r_setPassword = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        r_passwordAg = _useState10[0],\n        r_setPasswordAg = _useState10[1];\n\n  return React.createElement(\"div\", {\n    id: \"wrap-auth\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"box on\",\n    id: \"form-sig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"form\", {\n    action: \"/auth\",\n    method: \"POST\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    required: \"\",\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    required: \"\",\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Password\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleSubmit(email, password),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"forgot\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Register a new account\")), React.createElement(\"div\", {\n    id: \"forgot-password\",\n    className: \"mt24\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\",\n      paddingLeft: 0\n    },\n    onClick: handleChangeUI(\"for\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Forgot password?\")))), React.createElement(\"div\", {\n    className: \"box d-none on\",\n    id: \"form-for\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"Fortgot password\"), React.createElement(\"form\", {\n    action: \"/auth\",\n    method: \"POST\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    required: \"\",\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleSubmit(email, password),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"sig\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Login\")))), React.createElement(\"div\", {\n    className: \"box d-none on\",\n    id: \"form-reg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Register\"), React.createElement(\"form\", {\n    action: \"/auth\",\n    method: \"POST\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    required: \"\",\n    autoComplete: \"off\",\n    onChange: e => r_setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    required: \"\",\n    onChange: e => r_setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"Password\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password-again\",\n    required: \"\",\n    onChange: e => r_setPasswordAg(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password-again\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \"Password again\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleRegister(r_email, r_password, r_passwordAg),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"sig\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, \"Login\")))));\n};\n\nexport default withRouter(Auth);","map":{"version":3,"sources":["/opt/lampp/htdocs/Study_space/liars-ask-react/src/client/auth/Auth.js"],"names":["React","useState","postSignup","postSignin","authenticate","isAuthenticated","withRouter","window","onload","inputRequireDom","Array","from","document","getElementsByTagName","slice","length","map","ip","required","handleChangeUI","next","eres","querySelector","esig","efor","classList","remove","add","Auth","props","history","push","handleSubmit","email","password","event","preventDefault","then","res","payload","alert","message","handleRegister","passwordAg","patt","match","setEmail","setPassword","r_email","r_setEmail","r_password","r_setPassword","r_passwordAg","r_setPasswordAg","e","target","value","position","zIndex","color","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { withRouter } from 'react-router-dom';\nimport './style.css';\n\nwindow.onload = () => {\n    const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n    inputRequireDom.slice(0, inputRequireDom.length - 1).map( ip => {\n        return ip.required = true;\n    })\n}\n\nconst handleChangeUI = (next) => {\n    return () => {\n        let eres = document.querySelector(\"#form-reg\");\n        let esig = document.querySelector(\"#form-sig\");\n        let efor = document.querySelector(\"#form-for\");\n        if(next === \"reg\") {\n            eres.classList.remove(\"d-none\");\n            esig.classList.add(\"d-none\");\n        } else if(next === \"sig\") {\n            esig.classList.remove(\"d-none\");\n            eres.classList.add(\"d-none\");\n        } else {\n            efor.classList.remove(\"d-none\");\n            esig.classList.add(\"d-none\");\n        }\n    }\n}\n    \n\nconst Auth = (props) => {\n    // Check is autheticated\n    if(isAuthenticated()) {\n        props.history.push(\"/\");\n    }\n\n    const handleSubmit = (email, password) => {\n        window.event.preventDefault();\n        postSignin( {email, password} )\n        .then( res => {\n            if(!res.payload) {\n                alert(res.message)\n            } else {\n                authenticate(res.payload, () => {\n                    props.history.push(\"/\");\n                })\n            }\n        })\n    }\n\n    const handleRegister = (email, password, passwordAg) => {\n        window.event.preventDefault();\n        let patt = /\\d+/;\n\n        if (password.match(patt) === null || password.length < 6) {\n            alert(\"password have at least 6 characters and must contain 1 number\");\n        } else if(password !== passwordAg) {\n            alert(\"password and password again do not match!\")\n        } else {\n            postSignup( {email, password} )\n            .then( res => {\n                if(res && !res.payload) {\n                    alert(res.message)\n                } else {\n                    //\n                    handleChangeUI()();\n                }\n            })\n        }\n    }\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const [r_email, r_setEmail] = useState(\"\");\n    const [r_password, r_setPassword] = useState(\"\");\n    const [r_passwordAg, r_setPasswordAg] = useState(\"\");\n\n    return ( <div id=\"wrap-auth\">\n            <div className=\"box on\" id=\"form-sig\">\n                <h2>Login</h2>\n                <form action=\"/auth\" method=\"POST\">\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"text\" name=\"email\" required=\"\" \n                            onChange={ (e) => setEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password\" required=\"\"\n                            onChange={ (e) => setPassword(e.target.value) }\n                        />\n                        <label htmlFor=\"password\">Password</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <input\n                            type=\"submit\" name=\"\" value=\"Submit\"\n                            onClick={ () => handleSubmit(email, password)}\n                        />\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"forgot\")}\n                            href=\"#c\"\n                        >Register a new account</a>\n                    </div>\n                    <div id=\"forgot-password\" className=\"mt24\">\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\",\n                                paddingLeft: 0\n                            }}\n                            onClick={handleChangeUI(\"for\")}\n                            href=\"#c\"\n                        >Forgot password?</a>\n                    </div>\n                </form>\n            </div>\n\n\n            <div className=\"box d-none on\" id=\"form-for\">\n                <h2>Fortgot password</h2>\n                <form action=\"/auth\" method=\"POST\">\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"text\" name=\"email\" required=\"\" \n                            onChange={ (e) => setEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <input\n                            type=\"submit\" name=\"\" value=\"Submit\"\n                            onClick={ () => handleSubmit(email, password)}\n                        />\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"sig\")}\n                            href=\"#c\"\n                        >Login</a>\n                    </div>\n                </form>\n            </div>\n\n\n            <div className=\"box d-none on\" id=\"form-reg\">\n                <h2>Register</h2>\n                <form action=\"/auth\" method=\"POST\">\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"email\" name=\"email\" required=\"\" autoComplete={\"off\"}\n                            onChange={ (e) => r_setEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password\" required=\"\"\n                            onChange={ (e) => r_setPassword(e.target.value) }\n                        />\n                        <label htmlFor=\"password\">Password</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password-again\" required=\"\"\n                            onChange={ (e) => r_setPasswordAg(e.target.value) }\n                        />\n                        <label htmlFor=\"password-again\">Password again</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <input\n                            type=\"submit\" name=\"\" value=\"Submit\"\n                            onClick={() => handleRegister(r_email, r_password, r_passwordAg)}\n                        />\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"sig\")}\n                            href=\"#c\"\n                        >Login</a>\n                    </div>\n                </form>\n            </div>\n\n        </div>\n    )\n}\n\nexport default withRouter(Auth);"]},"metadata":{},"sourceType":"module"}