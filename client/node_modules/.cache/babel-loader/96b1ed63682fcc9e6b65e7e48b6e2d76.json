{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/auth/Auth.js\";\nimport React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { forgotPassword } from '../../controllers/authController';\nimport './style.css';\n\nclass Auth extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChangeUI = next => {\n      return () => {\n        let eres = document.querySelector(\"#form-reg\");\n        let esig = document.querySelector(\"#form-sig\");\n        let efor = document.querySelector(\"#form-for\");\n\n        if (next === \"reg\") {\n          eres.classList.remove(\"d-none\");\n          esig.classList.add(\"d-none\");\n          efor.classList.add(\"d-none\");\n        } else if (next === \"sig\") {\n          esig.classList.remove(\"d-none\");\n          eres.classList.add(\"d-none\");\n          efor.classList.add(\"d-none\");\n        } else {\n          efor.classList.remove(\"d-none\");\n          esig.classList.add(\"d-none\");\n          eres.classList.add(\"d-none\");\n        }\n      };\n    };\n\n    this.handleSubmit = (email, password) => {\n      window.event.preventDefault();\n      postSignin({\n        email,\n        password\n      }).then(res => {\n        if (!res.payload) {\n          alert(res.message);\n        } else {\n          authenticate(res.payload, () => {\n            this.props.history.push(\"/\");\n          });\n        }\n      });\n    };\n\n    this.handleRegister = (email, password, passwordAg) => {\n      window.event.preventDefault();\n      let patt = /\\d+/;\n\n      if (password.match(patt) === null || password.length < 6) {\n        alert(\"password have at least 6 characters and must contain 1 number\");\n      } else if (password !== passwordAg) {\n        alert(\"password and password again do not match!\");\n      } else {\n        postSignup({\n          email,\n          password\n        }).then(res => {\n          if (res && !res.payload) {\n            alert(res.message);\n          } else {\n            //\n            this.handleChangeUI()(\"sig\");\n          }\n        });\n      }\n    };\n\n    this.handleSubmitForgot = async email => {\n      window.event.preventDefault();\n      let btnLoading = document.getElementById(\"wrap-forgot-btn\");\n      btnLoading.classList.add(\"btn-loading\");\n      let res = await forgotPassword(email);\n\n      if (res.message) {\n        alert(res.message);\n      }\n\n      btnLoading.classList.remove(\"btn-loading\");\n    };\n\n    this.state = {};\n  }\n\n  componentWillReceiveProps() {\n    if (isAuthenticated()) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  componentDidMount() {\n    const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n    inputRequireDom.slice(0, inputRequireDom.length - 1).map(ip => {\n      return ip.required = true;\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"wrap-auth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box on\",\n      id: \"form-sig\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      action: \"/auth\",\n      method: \"POST\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      required: \"\",\n      id: \"l-email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Email\")), React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      required: \"\",\n      id: \"l-password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Password\")), React.createElement(\"div\", {\n      className: \"d-flex align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      name: \"\",\n      value: \"Submit\",\n      onClick: () => this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n      style: {\n        position: \"relative\",\n        zIndex: \"9999\",\n        color: \"black\"\n      },\n      onClick: this.handleChangeUI(\"reg\"),\n      href: \"#c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Register a new account\")), React.createElement(\"div\", {\n      id: \"forgot-password\",\n      className: \"mt24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n      style: {\n        position: \"relative\",\n        zIndex: \"9999\",\n        color: \"black\",\n        paddingLeft: 0\n      },\n      onClick: this.handleChangeUI(\"for\"),\n      href: \"#c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Forgot password?\")))), React.createElement(\"div\", {\n      className: \"box d-none on\",\n      id: \"form-for\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Fortgot password\"), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"forgotEmail\",\n      required: \"\",\n      id: \"f-email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Email\")), React.createElement(\"div\", {\n      className: \"d-flex align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"wrap-forgot-btn\",\n      className: \"ps-relative\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      name: \"\",\n      value: \"Submit\",\n      onClick: () => this.handleSubmitForgot,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    })), React.createElement(\"a\", {\n      className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n      style: {\n        position: \"relative\",\n        zIndex: \"9999\",\n        color: \"black\"\n      },\n      onClick: this.handleChangeUI(\"sig\"),\n      href: \"#c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Login\")))), React.createElement(\"div\", {\n      className: \"box d-none on\",\n      id: \"form-reg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Register\"), React.createElement(\"form\", {\n      action: \"/auth\",\n      method: \"POST\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      required: \"\",\n      autoComplete: \"off\",\n      id: \"r-email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Email\")), React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      required: \"\",\n      id: \"r-password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Password\")), React.createElement(\"div\", {\n      className: \"inputBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password-again\",\n      required: \"\",\n      id: \"r-password-again\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"password-again\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Password again\")), React.createElement(\"div\", {\n      className: \"d-flex align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      name: \"\",\n      value: \"Submit\",\n      onClick: () => this.handleRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n      style: {\n        position: \"relative\",\n        zIndex: \"9999\",\n        color: \"black\"\n      },\n      onClick: this.handleChangeUI(\"sig\"),\n      href: \"#c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Login\")))));\n  }\n\n}\n\nexport default Auth;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/auth/Auth.js"],"names":["React","useState","postSignup","postSignin","authenticate","isAuthenticated","forgotPassword","Auth","Component","constructor","handleChangeUI","next","eres","document","querySelector","esig","efor","classList","remove","add","handleSubmit","email","password","window","event","preventDefault","then","res","payload","alert","message","props","history","push","handleRegister","passwordAg","patt","match","length","handleSubmitForgot","btnLoading","getElementById","state","componentWillReceiveProps","componentDidMount","inputRequireDom","Array","from","getElementsByTagName","slice","map","ip","required","render","position","zIndex","color","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { forgotPassword } from '../../controllers/authController';\nimport './style.css';\n\n\nclass Auth extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            \n        }\n    }\n\n    handleChangeUI = (next) => {\n        return () => {\n            let eres = document.querySelector(\"#form-reg\");\n            let esig = document.querySelector(\"#form-sig\");\n            let efor = document.querySelector(\"#form-for\");\n            if(next === \"reg\") {\n                eres.classList.remove(\"d-none\");\n                esig.classList.add(\"d-none\");\n                efor.classList.add(\"d-none\");\n            } else if(next === \"sig\") {\n                esig.classList.remove(\"d-none\");\n                eres.classList.add(\"d-none\");\n                efor.classList.add(\"d-none\");\n            } else {\n                efor.classList.remove(\"d-none\");\n                esig.classList.add(\"d-none\");\n                eres.classList.add(\"d-none\");\n            }\n        }\n    }\n\n    componentWillReceiveProps() {\n        if(isAuthenticated()) {\n            this.props.history.push(\"/\");\n        }\n    }\n\n    componentDidMount() {\n        const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n        inputRequireDom.slice(0, inputRequireDom.length - 1).map( ip => {\n            return ip.required = true;\n        })\n    }\n\n    handleSubmit = (email, password) => {\n        window.event.preventDefault();\n        postSignin( {email, password} )\n        .then( res => {\n            if(!res.payload) {\n                alert(res.message)\n            } else {\n                authenticate(res.payload, () => {\n                    this.props.history.push(\"/\");\n                })\n            }\n        })\n    }\n\n    handleRegister = (email, password, passwordAg) => {\n        window.event.preventDefault();\n        let patt = /\\d+/;\n\n        if (password.match(patt) === null || password.length < 6) {\n            alert(\"password have at least 6 characters and must contain 1 number\");\n        } else if(password !== passwordAg) {\n            alert(\"password and password again do not match!\")\n        } else {\n            postSignup( {email, password} )\n            .then( res => {\n                if(res && !res.payload) {\n                    alert(res.message)\n                } else {\n                    //\n                    this.handleChangeUI()(\"sig\");\n                }\n            })\n        }\n    }\n\n    handleSubmitForgot = async (email) => {\n        window.event.preventDefault();\n        let btnLoading = document.getElementById(\"wrap-forgot-btn\");\n        btnLoading.classList.add(\"btn-loading\");\n        let res = await forgotPassword(email);\n\n        if(res.message) {\n            alert(res.message);\n        }\n\n        btnLoading.classList.remove(\"btn-loading\");\n    }\n\n\n\n    render() {\n        return ( <div id=\"wrap-auth\">\n                <div className=\"box on\" id=\"form-sig\">\n                    <h2>Login</h2>\n                    <form action=\"/auth\" method=\"POST\">\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"text\" name=\"email\" required=\"\" id=\"l-email\"\n                            />\n                            <label htmlFor=\"email\">Email</label>\n                        </div>\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"password\" name=\"password\" required=\"\" id=\"l-password\"\n                            />\n                            <label htmlFor=\"password\">Password</label>\n                        </div>\n                        <div className=\"d-flex align-items-center\">\n                            <input\n                                type=\"submit\" name=\"\" value=\"Submit\"\n                                onClick={ () => this.handleSubmit}\n                            />\n                            <a\n                                className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                                style={{\n                                    position: \"relative\",\n                                    zIndex: \"9999\",\n                                    color: \"black\"\n                                }}\n                                onClick={this.handleChangeUI(\"reg\")}\n                                href=\"#c\"\n                            >Register a new account</a>\n                        </div>\n                        <div id=\"forgot-password\" className=\"mt24\">\n                            <a\n                                className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                                style={{\n                                    position: \"relative\",\n                                    zIndex: \"9999\",\n                                    color: \"black\",\n                                    paddingLeft: 0\n                                }}\n                                onClick={this.handleChangeUI(\"for\")}\n                                href=\"#c\"\n                            >Forgot password?</a>\n                        </div>\n                    </form>\n                </div>\n\n\n                <div className=\"box d-none on\" id=\"form-for\">\n                    <h2>Fortgot password</h2>\n                    <form >\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"text\" name=\"forgotEmail\" required=\"\"  id=\"f-email\"\n                            />\n                            <label htmlFor=\"email\">Email</label>\n                        </div>\n                        <div className=\"d-flex align-items-center\">\n                            <div id=\"wrap-forgot-btn\" className=\"ps-relative\">\n                                <input\n                                    type=\"submit\" name=\"\" value=\"Submit\"\n                                    onClick={ () => this.handleSubmitForgot}\n                                />\n                            </div>\n                            <a\n                                className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                                style={{\n                                    position: \"relative\",\n                                    zIndex: \"9999\",\n                                    color: \"black\"\n                                }}\n                                onClick={this.handleChangeUI(\"sig\")}\n                                href=\"#c\"\n                            >Login</a>\n                        </div>\n                    </form>\n                </div>\n\n\n                <div className=\"box d-none on\" id=\"form-reg\">\n                    <h2>Register</h2>\n                    <form action=\"/auth\" method=\"POST\">\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"email\" name=\"email\" required=\"\" autoComplete={\"off\"} id=\"r-email\"\n                            />\n                            <label htmlFor=\"email\">Email</label>\n                        </div>\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"password\" name=\"password\" required=\"\" id=\"r-password\"\n                            />\n                            <label htmlFor=\"password\">Password</label>\n                        </div>\n                        <div className=\"inputBox\">\n                            <input\n                                type=\"password\" name=\"password-again\" required=\"\" id=\"r-password-again\"\n                            />\n                            <label htmlFor=\"password-again\">Password again</label>\n                        </div>\n                        <div className=\"d-flex align-items-center\">\n                            <input\n                                type=\"submit\" name=\"\" value=\"Submit\"\n                                onClick={() => this.handleRegister}\n                            />\n                            <a\n                                className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                                style={{\n                                    position: \"relative\",\n                                    zIndex: \"9999\",\n                                    color: \"black\"\n                                }}\n                                onClick={this.handleChangeUI(\"sig\")}\n                                href=\"#c\"\n                            >Login</a>\n                        </div>\n                    </form>\n                </div>\n\n            </div>\n        )\n        \n    }\n}\n\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}