{"ast":null,"code":"import _slicedToArray from\"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import icon from\"../../images/icon-photo.svg\";import{isAuthenticated}from'../../controllers/userController';import{postUploadImage}from'../../controllers/galleryController';import Notify from'../components/Notify';var ModalPopup=function ModalPopup(props){var formData=new FormData();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),showNotify=_useState2[0],setShowNotify=_useState2[1];var closeDialog=function closeDialog(){document.querySelector(\".s-modal\").style.display=\"none\";};var previewPhoto=function previewPhoto(event){var reader=new FileReader();var inputAvatar=document.getElementById('preview-img');reader.onload=function(){inputAvatar.src=reader.result;};try{reader.readAsDataURL(event.target.files[0]);formData.append(\"photo\",event.target.files[0]);}catch(e){// do nothing\n}};var saveImg=function saveImg(){var userId=isAuthenticated().user._id;var token=isAuthenticated().token;var btn=document.getElementById(\"wrap-btn-loading\");btn.classList.add(\"btn-loading\");if(formData.get(\"photo\")){postUploadImage(formData,userId,token).then(function(res){if(res.imageURL){closeDialog();props.handleUploadedImage(res.imageURL);setShowNotify(res.message);}btn.classList.remove(\"btn-loading\");}).catch(function(err){setShowNotify(\"Error occur\");btn.classList.remove(\"btn-loading\");});}else{alert(\"Choose file upload!\");btn.classList.remove(\"btn-loading\");}};useEffect(function(){// document.querySelector(\"#root\").onclick = () => {\n//     document.querySelector(\".s-modal\").style.display = \"none\";\n// }\n});return React.createElement(React.Fragment,null,React.createElement(Notify,null),showNotify!==\"\"&&React.createElement(Notify,{class:\"on\",text:showNotify,clearMess:setShowNotify}),React.createElement(\"div\",{className:\"s-modal js-welcom-modal ps-fixed\",style:{display:\"none\"}},React.createElement(\"div\",{className:\"s-modal--dialog js-modal--dialog wmx4 ps-relative\",draggable:true},React.createElement(\"div\",{className:\"s-modal--body\"},React.createElement(\"div\",{className:\"choose-images\",id:\"choose-images\"},React.createElement(\"div\",{className:\"d-flex justify-content-center\"},React.createElement(\"button\",{className:\"s-btn s-btn__outline s-btn__hovero mt24 bd-none d-flex align-items-center\",onClick:function onClick(){return document.getElementById(\"img-gallery\").click();}},React.createElement(\"img\",{src:icon,alt:\"icon-photo\",width:\"24\",style:{background:\"#afafaf\",borderRadius:\"50%\"}}),\"\\xA0Choose\",React.createElement(\"input\",{type:\"file\",id:\"img-gallery\",className:\"d-none\",onChange:previewPhoto}))),React.createElement(\"div\",{className:\"preview-area\"},React.createElement(\"img\",{id:\"preview-img\",style:{maxWidth:\"400px\"},src:\"\",alt:\"\"})))),React.createElement(\"div\",{className:\"s-modal--footer\"},React.createElement(\"div\",{id:\"wrap-btn-loading\"},React.createElement(\"button\",{className:\"s-btn s-btn__outline s-btn__primary mt24 mr24\",id:\"save-photo\",onClick:saveImg},\"Save img\"))),React.createElement(\"button\",{className:\"s-modal--close s-btn js-modal-close ps-absolute\",onClick:closeDialog},React.createElement(\"svg\",{\"aria-hidden\":\"true\",className:\"svg-icon iconClearSm\",width:\"14\",height:\"14\",viewBox:\"0 0 14 14\"},React.createElement(\"path\",{d:\"M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7 12 3.41z\"}))))));};export default ModalPopup;","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/client/src/client/images-gallery/ModalPopup.js"],"names":["React","useEffect","useState","isAuthenticated","postUploadImage","Notify","ModalPopup","props","formData","FormData","showNotify","setShowNotify","closeDialog","document","querySelector","style","display","previewPhoto","event","reader","FileReader","inputAvatar","getElementById","onload","src","result","readAsDataURL","target","files","append","e","saveImg","userId","user","_id","token","btn","classList","add","get","then","res","imageURL","handleUploadedImage","message","remove","catch","err","alert","click","icon","background","borderRadius","maxWidth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport icon from '../../images/icon-photo.svg';\nimport { isAuthenticated } from '../../controllers/userController';\nimport { postUploadImage } from '../../controllers/galleryController';\nimport Notify from '../components/Notify';\n\nconst ModalPopup = props => {\n    const formData = new FormData();\n    const [showNotify, setShowNotify] = useState(\"\");\n\n    const closeDialog = () => {\n        document.querySelector(\".s-modal\").style.display = \"none\";\n    }\n    \n    const previewPhoto = (event) => {\n        let reader = new FileReader();\n        let inputAvatar = document.getElementById('preview-img');\n        reader.onload = function () {\n            inputAvatar.src = reader.result;\n        }\n        try {\n            reader.readAsDataURL(event.target.files[0]);\n            formData.append(\"photo\", event.target.files[0]);\n        } catch(e) {\n            // do nothing\n        }\n    }\n\n    const saveImg = () => {\n        let userId = isAuthenticated().user._id;\n        let token = isAuthenticated().token;\n        let btn = document.getElementById(\"wrap-btn-loading\");\n        btn.classList.add(\"btn-loading\");\n        if(formData.get(\"photo\")) {\n            postUploadImage(formData, userId, token)\n            .then( res => {\n                if(res.imageURL) {\n                    closeDialog();\n                    props.handleUploadedImage(res.imageURL);\n                    setShowNotify(res.message)\n                }\n                btn.classList.remove(\"btn-loading\");\n            })\n            .catch( err => {\n                setShowNotify(\"Error occur\");\n                btn.classList.remove(\"btn-loading\");\n            })\n        } else {\n            alert(\"Choose file upload!\");\n            btn.classList.remove(\"btn-loading\");\n        }\n        \n    }\n\n    useEffect( () => {\n        // document.querySelector(\"#root\").onclick = () => {\n        //     document.querySelector(\".s-modal\").style.display = \"none\";\n        // }\n    })\n    \n\n    return (\n        <>\n            <Notify />\n            {showNotify !== \"\" &&  <Notify class=\"on\" text={showNotify} clearMess={setShowNotify} />}\n            <div className=\"s-modal js-welcom-modal ps-fixed\" style={{display: \"none\"}}>\n                \n                <div\n                    className=\"s-modal--dialog js-modal--dialog wmx4 ps-relative\"\n                    draggable={true}\n                >\n                    {/* <h1 className=\"s-modal--header\">Upload your photo</h1> */}\n                    <div className=\"s-modal--body\">\n                        <div className=\"choose-images\" id=\"choose-images\">\n                            <div className=\"d-flex justify-content-center\">\n                                <button className=\"s-btn s-btn__outline s-btn__hovero mt24 bd-none d-flex align-items-center\" onClick={ () => document.getElementById(\"img-gallery\").click()}>\n                                    <img src={icon} alt=\"icon-photo\" width=\"24\" style={{ background: \"#afafaf\", borderRadius: \"50%\"}}/>&nbsp;Choose\n                                    <input type=\"file\" id=\"img-gallery\" className=\"d-none\" onChange={previewPhoto}/>\n                                </button>\n                            </div>\n                            <div className=\"preview-area\">\n                                <img id=\"preview-img\" style={{maxWidth: \"400px\"}} src=\"\" alt=\"\"/>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"s-modal--footer\">\n                        <div id=\"wrap-btn-loading\">\n                            <button\n                                className=\"s-btn s-btn__outline s-btn__primary mt24 mr24\"\n                                id=\"save-photo\"\n                                onClick={saveImg}\n                            >Save img</button>\n                        </div>\n                        \n                    </div>\n                    \n                    <button className=\"s-modal--close s-btn js-modal-close ps-absolute\" onClick={closeDialog}>\n                        <svg aria-hidden=\"true\" className=\"svg-icon iconClearSm\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\"><path d=\"M12 3.41L10.59 2 7 5.59 3.41 2 2 3.41 5.59 7 2 10.59 3.41 12 7 8.41 10.59 12 12 10.59 8.41 7 12 3.41z\"></path></svg>\n                    </button>\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ModalPopup;"]},"metadata":{},"sourceType":"module"}