{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/src/client/search/AdvanceSerach.js\";\nimport React, { Component } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport Notify from '../components/Notify';\nimport { onAdvanceSearch } from '../../controllers/searchController';\nimport './AdvanceSerach.css';\nimport Tag from '../components/Tag';\n\nclass AdvanceSearch extends Component {\n  constructor() {\n    super();\n\n    this.handleAddTag = event => {\n      if (event.keyCode === 13) {\n        this.setState({\n          tags: [...this.state.tags, event.target.value]\n        });\n        event.target.value = \"\";\n      }\n    };\n\n    this.closeTag = tagName => {\n      this.setState({\n        tags: this.state.tags.filter(tag => tag !== tagName)\n      });\n    };\n\n    this.stringifyQuery = query => {\n      let queryString = \"?\";\n\n      for (let key in query) {\n        if (query[key]) {\n          queryString += key + \"=\" + query[key] + \"&\";\n        }\n      }\n\n      return queryString.substr(0, queryString.length - 1);\n    };\n\n    this.handleSearchAdvance = async () => {\n      let bntLoading = document.getElementById(\"wrap-btn-loading\");\n      bntLoading.classList.add(\"btn-loading\");\n\n      try {\n        let category = document.getElementById(\"s-category\").value;\n        let query = document.getElementById(\"s-query\").value;\n        let dateFrom = document.getElementById(\"s-date-from\").value;\n        let dateTo = document.getElementById(\"s-date-to\").value;\n        let tags = this.state.tags.join(\"__\");\n        let queryObject = {\n          category,\n          tags,\n          query,\n          dateFrom,\n          dateTo\n        };\n        let querytString = this.stringifyQuery(queryObject);\n        let data = await onAdvanceSearch(querytString);\n        console.log(data);\n\n        if (data) {\n          this.setState({\n            data,\n            category: category === \"questions\" ? category + \"/ask\" : category,\n            query\n          });\n          bntLoading.classList.remove(\"btn-loading\");\n        }\n      } catch (err) {\n        console.log(err);\n        bntLoading.classList.remove(\"btn-loading\");\n      }\n    };\n\n    this.state = {\n      message: '',\n      data: [],\n      dataHL: [],\n      category: \"\",\n      query: \"\",\n      tags: []\n    };\n  }\n\n  render() {\n    let _this$state = this.state,\n        message = _this$state.message,\n        data = _this$state.data,\n        category = _this$state.category,\n        query = _this$state.query;\n    return React.createElement(\"div\", {\n      id: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"mainbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-head\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Notify, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), message !== \"\" && React.createElement(Notify, {\n      class: \"on\",\n      text: message,\n      clearMess: this.clearMess,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"grid d-flex align-items-centers mb16\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"fs-headline1 mr-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Advance Search\")), React.createElement(\"p\", {\n      className: \"mb24 f13 fw350\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"advance-search-box\",\n      className: \"bg-white bar-sm bs-md p16 md-content w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"s-category\",\n      className: \"d-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Category\"), React.createElement(\"select\", {\n      name: \"s-category\",\n      id: \"s-category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"announcements\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Announcements\"), React.createElement(\"option\", {\n      value: \"questions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Questions\"), React.createElement(\"option\", {\n      value: \"blogs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Blogs\"))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"s-tags\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Tags (Hit enter to add tag)\"), React.createElement(\"input\", {\n      onKeyDown: this.handleAddTag,\n      type: \"text\",\n      id: \"s-tags\",\n      className: \"s-input s-input__search w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"list-tags\",\n      style: {\n        marginTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, this.state.tags.map(tag => {\n      return React.createElement(Tag, {\n        close: true,\n        closeTag: this.closeTag,\n        name: tag,\n        key: tag,\n        id: tag,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    }))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"s-query\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Query\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"s-query\",\n      className: \"s-input s-input__search w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"s-date-from\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Date From\"), React.createElement(\"input\", {\n      type: \"date\",\n      id: \"s-date-from\",\n      className: \"s-input s-input__search w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"s-date-to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Date To\"), React.createElement(\"input\", {\n      type: \"date\",\n      id: \"s-date-to\",\n      className: \"s-input s-input__search w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"wrap-btn-loading\",\n      className: \"ps-relative form-group mt24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"s-btn btn-sm btn-outlined colorGreen\",\n      onClick: this.handleSearchAdvance,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Search\"))), React.createElement(\"div\", {\n      className: \"bg-white bar-sm bs-md p16 md-content w-100 mt24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, data.map((d, i) => {\n      return React.createElement(\"div\", {\n        className: \"list-sumary w-100\",\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"hyper-link\",\n        target: \"_blank\",\n        href: \"/\".concat(category, \"/\").concat(d._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, // d.title.replace(query, <b>{query}</b>)\n      \"- \" + d.title)));\n    })), React.createElement(\"div\", {\n      className: \"clear-fix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(Sidebar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"clear-fix\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default AdvanceSearch;","map":{"version":3,"sources":["/opt/lampp/htdocs/Cloud/Project-NL/liars-ask-react-deploy/src/client/search/AdvanceSerach.js"],"names":["React","Component","Sidebar","Notify","onAdvanceSearch","Tag","AdvanceSearch","constructor","handleAddTag","event","keyCode","setState","tags","state","target","value","closeTag","tagName","filter","tag","stringifyQuery","query","queryString","key","substr","length","handleSearchAdvance","bntLoading","document","getElementById","classList","add","category","dateFrom","dateTo","join","queryObject","querytString","data","console","log","remove","err","message","dataHL","render","clearMess","marginTop","map","d","i","_id","title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport Notify from '../components/Notify';\nimport { onAdvanceSearch } from '../../controllers/searchController';\nimport './AdvanceSerach.css';\nimport Tag from '../components/Tag';\n\nclass AdvanceSearch extends Component {\n    constructor() {\n        super();\n        this.state = {\n            message: '',\n            data: [],\n            dataHL: [],\n            category: \"\",\n            query: \"\",\n            tags: []\n        }\n    }\n\n    handleAddTag = event => {\n        if(event.keyCode === 13) {\n            this.setState({ tags: [...this.state.tags, event.target.value] })\n            event.target.value = \"\";\n        }\n    }\n\n    closeTag = tagName => {\n        this.setState({\n            tags: this.state.tags.filter(tag => tag !== tagName)\n        })\n    }\n\n    stringifyQuery = query => {\n        let queryString = \"?\";\n        for(let key in query) {\n            if(query[key]) {\n                queryString += key + \"=\" + query[key] + \"&\";\n            }\n        }\n        return queryString.substr(0, queryString.length-1);\n    }\n    \n    handleSearchAdvance = async () => {\n        let bntLoading = document.getElementById(\"wrap-btn-loading\");\n        bntLoading.classList.add(\"btn-loading\");\n        try {\n            let category = document.getElementById(\"s-category\").value;\n            let query = document.getElementById(\"s-query\").value;\n            let dateFrom = document.getElementById(\"s-date-from\").value;\n            let dateTo = document.getElementById(\"s-date-to\").value;\n            let tags = this.state.tags.join(\"__\");\n\n            let queryObject = { category, tags, query, dateFrom, dateTo }\n\n            let querytString = this.stringifyQuery(queryObject);\n\n            let data = await onAdvanceSearch(querytString);\n            console.log(data);\n            if(data) {  \n                this.setState( { data, category: category === \"questions\" ? category + \"/ask\" : category, query } );\n                bntLoading.classList.remove(\"btn-loading\");\n            }\n        } catch (err) {\n            console.log(err)\n            bntLoading.classList.remove(\"btn-loading\");\n        }\n    }\n\n    render() {\n        let { message, data, category, query } = this.state;\n        return (\n            <div id=\"content\">\n                <div id=\"mainbar\">\n                    <div className=\"main-head\">\n                        <Notify />  \n                        {message !== \"\" &&  <Notify class=\"on\" text={message} clearMess={this.clearMess} />}\n                        <div className=\"grid d-flex align-items-centers mb16\">\n                            <h1 className=\"fs-headline1 mr-auto\">Advance Search</h1>\n                        </div>\n                        <p className=\"mb24 f13 fw350\"></p>\n                    </div>\n    \n                    <div id=\"advance-search-box\" className=\"bg-white bar-sm bs-md p16 md-content w-100\">\n                        <div className=\"form-group\">\n                            <label htmlFor=\"s-category\" className=\"d-block\">Category</label>\n                            <select name=\"s-category\" id=\"s-category\">\n                                <option value=\"announcements\">Announcements</option>\n                                <option value=\"questions\">Questions</option>\n                                <option value=\"blogs\">Blogs</option>\n                            </select>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"s-tags\">Tags (Hit enter to add tag)</label>\n                            <input\n                                onKeyDown={this.handleAddTag}\n                                type=\"text\" id=\"s-tags\" className=\"s-input s-input__search w-100\"\n                            />\n\n                            <div className=\"list-tags\" style={{marginTop: \"10px\"}}>\n                                {\n                                    this.state.tags.map(tag => {\n                                        return (\n                                            <Tag close closeTag={this.closeTag} name={tag} key={tag} id={tag} />\n                                        )\n                                    })\n                                }\n                            </div>\n\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"s-query\">Query</label>\n                            <input type=\"text\" id=\"s-query\" className=\"s-input s-input__search w-100\"/>\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"s-date-from\">Date From</label>\n                            <input type=\"date\" id=\"s-date-from\" className=\"s-input s-input__search w-100\"/>\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"s-date-to\">Date To</label>\n                            <input type=\"date\" id=\"s-date-to\" className=\"s-input s-input__search w-100\"/>\n                        </div>\n\n                        <div id=\"wrap-btn-loading\" className=\"ps-relative form-group mt24\">\n                            <button\n                                className=\"s-btn btn-sm btn-outlined colorGreen\"\n                                onClick={this.handleSearchAdvance}\n                            >Search</button>\n                        </div>\n                    </div>\n\n                    <div className=\"bg-white bar-sm bs-md p16 md-content w-100 mt24\">\n                        {\n                            data.map( (d, i) => {\n                                return (\n                                    <div className=\"list-sumary w-100\" key={i}>\n                                        <h3>\n                                            <a className=\"hyper-link\" target=\"_blank\" href={`/${category}/${d._id}`}>\n                                                {\n                                                    // d.title.replace(query, <b>{query}</b>)\n                                                    \"- \" + d.title\n                                                }\n                                            </a>\n                                        </h3>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n\n                    <div className=\"clear-fix\"></div>\n                </div>\n                <Sidebar />\n                <div className=\"clear-fix\"></div>\n            </div>\n        )\n    }\n}\n\nexport default AdvanceSearch;"]},"metadata":{},"sourceType":"module"}