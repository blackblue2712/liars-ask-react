{"ast":null,"code":"import _slicedToArray from \"/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/auth/Auth.js\";\nimport React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { forgotPassword } from '../../controllers/authController';\nimport './style.css';\n\nwindow.onload = () => {\n  const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n  inputRequireDom.slice(0, inputRequireDom.length - 1).map(ip => {\n    return ip.required = true;\n  });\n};\n\nconst handleChangeUI = next => {\n  return () => {\n    let eres = document.querySelector(\"#form-reg\");\n    let esig = document.querySelector(\"#form-sig\");\n    let efor = document.querySelector(\"#form-for\");\n\n    if (next === \"reg\") {\n      eres.classList.remove(\"d-none\");\n      esig.classList.add(\"d-none\");\n      efor.classList.add(\"d-none\");\n    } else if (next === \"sig\") {\n      esig.classList.remove(\"d-none\");\n      eres.classList.add(\"d-none\");\n      efor.classList.add(\"d-none\");\n    } else {\n      efor.classList.remove(\"d-none\");\n      esig.classList.add(\"d-none\");\n      eres.classList.add(\"d-none\");\n    }\n  };\n};\n\nconst Auth = props => {\n  // Check is autheticated\n  if (isAuthenticated()) {\n    props.history.push(\"/\");\n  }\n\n  const handleSubmit = (email, password) => {\n    window.event.preventDefault();\n    postSignin({\n      email,\n      password\n    }).then(res => {\n      if (!res.payload) {\n        alert(res.message);\n      } else {\n        authenticate(res.payload, () => {\n          props.history.push(\"/\");\n        });\n      }\n    });\n  };\n\n  const handleRegister = (email, password, passwordAg) => {\n    window.event.preventDefault();\n    let patt = /\\d+/;\n\n    if (password.match(patt) === null || password.length < 6) {\n      alert(\"password have at least 6 characters and must contain 1 number\");\n    } else if (password !== passwordAg) {\n      alert(\"password and password again do not match!\");\n    } else {\n      postSignup({\n        email,\n        password\n      }).then(res => {\n        if (res && !res.payload) {\n          alert(res.message);\n        } else {\n          //\n          handleChangeUI()(\"sig\");\n        }\n      });\n    }\n  };\n\n  const handleSubmitForgot = async email => {\n    window.event.preventDefault();\n    let btnLoading = document.getElementById(\"wrap-forgot-btn\");\n    btnLoading.classList.add(\"btn-loading\");\n    let res = await forgotPassword(email);\n\n    if (res.message) {\n      alert(res.message);\n    }\n\n    btnLoading.classList.remove(\"btn-loading\");\n  };\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        r_email = _useState6[0],\n        r_setEmail = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        r_password = _useState8[0],\n        r_setPassword = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        r_passwordAg = _useState10[0],\n        r_setPasswordAg = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        femail = _useState12[0],\n        setForgotEmail = _useState12[1];\n\n  return React.createElement(\"div\", {\n    id: \"wrap-auth\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"box on\",\n    id: \"form-sig\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"form\", {\n    action: \"/auth\",\n    method: \"POST\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    required: \"\",\n    onChange: e => setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    required: \"\",\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Password\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleSubmit(email, password),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"reg\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Register a new account\")), React.createElement(\"div\", {\n    id: \"forgot-password\",\n    className: \"mt24\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\",\n      paddingLeft: 0\n    },\n    onClick: handleChangeUI(\"for\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Forgot password?\")))), React.createElement(\"div\", {\n    className: \"box d-none on\",\n    id: \"form-for\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"Fortgot password\"), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"forgotEmail\",\n    required: \"\",\n    onChange: e => setForgotEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"wrap-forgot-btn\",\n    className: \"ps-relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleSubmitForgot(femail),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  })), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"sig\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Login\")))), React.createElement(\"div\", {\n    className: \"box d-none on\",\n    id: \"form-reg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"Register\"), React.createElement(\"form\", {\n    action: \"/auth\",\n    method: \"POST\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    required: \"\",\n    autoComplete: \"off\",\n    onChange: e => r_setEmail(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, \"Email\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    required: \"\",\n    onChange: e => r_setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Password\")), React.createElement(\"div\", {\n    className: \"inputBox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password-again\",\n    required: \"\",\n    onChange: e => r_setPasswordAg(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"password-again\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, \"Password again\")), React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    name: \"\",\n    value: \"Submit\",\n    onClick: () => handleRegister(r_email, r_password, r_passwordAg),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    className: \"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\",\n    style: {\n      position: \"relative\",\n      zIndex: \"9999\",\n      color: \"black\"\n    },\n    onClick: handleChangeUI(\"sig\"),\n    href: \"#c\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"Login\")))));\n};\n\nexport default Auth;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/liars-ask-react/src/client/auth/Auth.js"],"names":["React","useState","postSignup","postSignin","authenticate","isAuthenticated","forgotPassword","window","onload","inputRequireDom","Array","from","document","getElementsByTagName","slice","length","map","ip","required","handleChangeUI","next","eres","querySelector","esig","efor","classList","remove","add","Auth","props","history","push","handleSubmit","email","password","event","preventDefault","then","res","payload","alert","message","handleRegister","passwordAg","patt","match","handleSubmitForgot","btnLoading","getElementById","setEmail","setPassword","r_email","r_setEmail","r_password","r_setPassword","r_passwordAg","r_setPasswordAg","femail","setForgotEmail","e","target","value","position","zIndex","color","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { postSignup, postSignin, authenticate, isAuthenticated } from '../../controllers/userController';\nimport { forgotPassword } from '../../controllers/authController';\nimport './style.css';\n\nwindow.onload = () => {\n    const inputRequireDom = Array.from(document.getElementsByTagName(\"input\"));\n    inputRequireDom.slice(0, inputRequireDom.length - 1).map( ip => {\n        return ip.required = true;\n    })\n}\n\nconst handleChangeUI = (next) => {\n    return () => {\n        let eres = document.querySelector(\"#form-reg\");\n        let esig = document.querySelector(\"#form-sig\");\n        let efor = document.querySelector(\"#form-for\");\n        if(next === \"reg\") {\n            eres.classList.remove(\"d-none\");\n            esig.classList.add(\"d-none\");\n            efor.classList.add(\"d-none\");\n        } else if(next === \"sig\") {\n            esig.classList.remove(\"d-none\");\n            eres.classList.add(\"d-none\");\n            efor.classList.add(\"d-none\");\n        } else {\n            efor.classList.remove(\"d-none\");\n            esig.classList.add(\"d-none\");\n            eres.classList.add(\"d-none\");\n        }\n    }\n}\n    \n\nconst Auth = (props) => {\n    // Check is autheticated\n    if(isAuthenticated()) {\n        props.history.push(\"/\");\n    }\n\n    const handleSubmit = (email, password) => {\n        window.event.preventDefault();\n        postSignin( {email, password} )\n        .then( res => {\n            if(!res.payload) {\n                alert(res.message)\n            } else {\n                authenticate(res.payload, () => {\n                    props.history.push(\"/\");\n                })\n            }\n        })\n    }\n\n    const handleRegister = (email, password, passwordAg) => {\n        window.event.preventDefault();\n        let patt = /\\d+/;\n\n        if (password.match(patt) === null || password.length < 6) {\n            alert(\"password have at least 6 characters and must contain 1 number\");\n        } else if(password !== passwordAg) {\n            alert(\"password and password again do not match!\")\n        } else {\n            postSignup( {email, password} )\n            .then( res => {\n                if(res && !res.payload) {\n                    alert(res.message)\n                } else {\n                    //\n                    handleChangeUI()(\"sig\");\n                }\n            })\n        }\n    }\n\n    const handleSubmitForgot = async (email) => {\n        window.event.preventDefault();\n        let btnLoading = document.getElementById(\"wrap-forgot-btn\");\n        btnLoading.classList.add(\"btn-loading\");\n        let res = await forgotPassword(email);\n\n        if(res.message) {\n            alert(res.message);\n        }\n\n        btnLoading.classList.remove(\"btn-loading\");\n    }\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const [r_email, r_setEmail] = useState(\"\");\n    const [r_password, r_setPassword] = useState(\"\");\n    const [r_passwordAg, r_setPasswordAg] = useState(\"\");\n\n    const [femail, setForgotEmail] = useState(\"\");\n\n    return ( <div id=\"wrap-auth\">\n            <div className=\"box on\" id=\"form-sig\">\n                <h2>Login</h2>\n                <form action=\"/auth\" method=\"POST\">\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"text\" name=\"email\" required=\"\" \n                            onChange={ (e) => setEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password\" required=\"\"\n                            onChange={ (e) => setPassword(e.target.value) }\n                        />\n                        <label htmlFor=\"password\">Password</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <input\n                            type=\"submit\" name=\"\" value=\"Submit\"\n                            onClick={ () => handleSubmit(email, password)}\n                        />\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"reg\")}\n                            href=\"#c\"\n                        >Register a new account</a>\n                    </div>\n                    <div id=\"forgot-password\" className=\"mt24\">\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\",\n                                paddingLeft: 0\n                            }}\n                            onClick={handleChangeUI(\"for\")}\n                            href=\"#c\"\n                        >Forgot password?</a>\n                    </div>\n                </form>\n            </div>\n\n\n            <div className=\"box d-none on\" id=\"form-for\">\n                <h2>Fortgot password</h2>\n                <form >\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"text\" name=\"forgotEmail\" required=\"\" \n                            onChange={ (e) => setForgotEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <div id=\"wrap-forgot-btn\" className=\"ps-relative\">\n                            <input\n                                type=\"submit\" name=\"\" value=\"Submit\"\n                                onClick={ () => handleSubmitForgot(femail)}\n                            />\n                        </div>\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"sig\")}\n                            href=\"#c\"\n                        >Login</a>\n                    </div>\n                </form>\n            </div>\n\n\n            <div className=\"box d-none on\" id=\"form-reg\">\n                <h2>Register</h2>\n                <form action=\"/auth\" method=\"POST\">\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"email\" name=\"email\" required=\"\" autoComplete={\"off\"}\n                            onChange={ (e) => r_setEmail(e.target.value) }\n                        />\n                        <label htmlFor=\"email\">Email</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password\" required=\"\"\n                            onChange={ (e) => r_setPassword(e.target.value) }\n                        />\n                        <label htmlFor=\"password\">Password</label>\n                    </div>\n                    <div className=\"inputBox\">\n                        <input\n                            type=\"password\" name=\"password-again\" required=\"\"\n                            onChange={ (e) => r_setPasswordAg(e.target.value) }\n                        />\n                        <label htmlFor=\"password-again\">Password again</label>\n                    </div>\n                    <div className=\"d-flex align-items-center\">\n                        <input\n                            type=\"submit\" name=\"\" value=\"Submit\"\n                            onClick={() => handleRegister(r_email, r_password, r_passwordAg)}\n                        />\n                        <a\n                            className=\"s-btn s-btn__outline s-btn__hovero bd-none ml-auto\"\n                            style={{\n                                position: \"relative\",\n                                zIndex: \"9999\",\n                                color: \"black\"\n                            }}\n                            onClick={handleChangeUI(\"sig\")}\n                            href=\"#c\"\n                        >Login</a>\n                    </div>\n                </form>\n            </div>\n\n        </div>\n    )\n}\n\nexport default Auth;"]},"metadata":{},"sourceType":"module"}